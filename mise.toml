[tools]
kubectl = "latest"     # âš“ Kubernetes CLI
k9s = "latest"         # ğŸ“Š Kubernetes dashboard TUI
yq = "latest"          # ğŸ“ YAML processor
opentofu = "latest"    # ğŸŒ± Infrastructure as Code
talosctl = "latest"    # ğŸ§ Talos Linux CLI
helm = "latest"        # â›µ Helm package manager
cilium = "latest"      # ğŸ¦  Cilium CLI for networking (not in mise registry)
kustomize = "latest"   # ğŸ§© Kustomize for manifests

[settings]
experimental = true

# ...existing code...

[tasks.setup]
description = "Trust and install all tools"
run = """
mise trust
mise install
"""


[tasks.cluster-info]
description = "Show cluster information"
run = """
echo "ğŸ” Talos Cluster Info:"
kubectl get nodes -o wide
kubectl get pods -A --field-selector=status.phase!=Running
"""
[tasks.cluster-status]
description = "Check cluster health (Talos + Kubernetes)"
run = """
echo "ğŸ¥ Talos Cluster Health:"
talosctl --talosconfig tofu/output/talos-config.yaml health

echo ""
echo "â˜¸ï¸ Kubernetes Nodes:"
kubectl --kubeconfig tofu/output/kube-config.yaml get nodes -o wide

echo ""
echo "ğŸ” Not Running Pods:"
kubectl --kubeconfig tofu/output/kube-config.yaml get pods -A --field-selector=status.phase!=Running
"""

[tasks.apply-manifests]
description = "Apply Kubernetes manifests"
run = """
echo "ğŸš€ Applying manifests..."
kubectl apply -f kubernetes/
"""

[tasks.tofu-plan]
description = "Plan infrastructure changes"
run = """
echo "ğŸ“‹ Planning infrastructure changes..."
cd tofu
tofu plan
"""

[tasks.tofu-apply]
description = "Apply infrastructure changes"
run = """
echo "ğŸš€ Applying infrastructure changes..."
cd tofu
tofu apply
"""

[hooks]
enter = """
echo 'ğŸ¯ Talos K8s DevContainer Ready!'
echo ''
echo 'ğŸ”§ Tools available: âš“ kubectl ğŸ“Š k9s ğŸ“ yq ğŸŒ± opentofu ğŸ§ talosctl'
echo ''
echo 'â“ Available commands:'
echo '  âš“ kubectl get nodes        # View cluster nodes'
echo '  ğŸ“Š k9s                     # Open K8s dashboard'
echo '  ğŸ§ talosctl health         # Check Talos cluster health'
echo '  ğŸŒ± tofu plan               # Plan infrastructure changes'
echo '  ğŸ“ yq --version           # Check YAML processor'
echo ''
echo 'ğŸš€ Quick tasks:'
echo '  mise run setup            # Install all tools'
echo '  mise run cluster-info     # Show cluster information'
echo '  mise run cluster-status   # Check cluster health'
echo ''
"""


