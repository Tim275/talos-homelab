---
apiVersion: v1
kind: ConfigMap
metadata:
  name: bootstrap-env
  namespace: lldap
data:
  LLDAP_URL: "http://lldap:80"
  DO_CLEANUP: "true"  # Remove users/groups not in config

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: bootstrap-users
  namespace: lldap
data:
  users.json: |
    {
      "id": "tim275",
      "email": "tim@homelab.local",
      "firstName": "Tim",
      "lastName": "Admin",
      "displayName": "Tim275 - Cluster Admin",
      "password": "changeme-on-first-login",
      "groups": [
        "cluster-admins",
        "argocd-admins"
      ]
    }
    {
      "id": "ci-user",
      "email": "ci@homelab.local",
      "firstName": "CI",
      "lastName": "Bot",
      "displayName": "CI/CD Service Account",
      "groups": [
        "ci-runners"
      ]
    }

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: bootstrap-groups
  namespace: lldap
data:
  groups.json: |
    {
      "name": "cluster-admins",
      "application": "kubernetes"
    }
    {
      "name": "argocd-admins",
      "application": "argocd"
    }
    {
      "name": "ci-runners",
      "application": "tekton"
    }
    {
      "name": "developers",
      "application": "kubernetes"
    }