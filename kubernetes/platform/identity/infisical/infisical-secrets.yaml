---
# Infisical Configuration Secret
# NOTE: This uses a Kubernetes Job to merge sealed secrets into a single config
# The job runs after SealedSecrets are unsealed by the controller
apiVersion: v1
kind: ConfigMap
metadata:
  name: infisical-config
  namespace: infisical
data:
  # Database configuration (static parts)
  DB_HOST: "infisical-postgres-rw.infisical.svc"
  DB_PORT: "5432"
  DB_NAME: "infisical"
  DB_USER: "infisical"

  # Redis configuration
  REDIS_HOST: "infisical-redis.infisical.svc"
  REDIS_PORT: "6379"

  # Site configuration
  SITE_URL: "https://infisical.timourhomelab.org"
  NODE_ENV: "production"
