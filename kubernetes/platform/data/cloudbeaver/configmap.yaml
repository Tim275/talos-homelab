apiVersion: v1
kind: ConfigMap
metadata:
  name: cloudbeaver-config
  namespace: cloudbeaver
  annotations:
    argocd.argoproj.io/sync-wave: "2"
data:
  cloudbeaver.conf: |
    {
      "server": {
        "serverPort": 8978,
        "serverHost": "0.0.0.0",
        "serverName": "CloudBeaver - Homelab",
        "workspaceLocation": "/opt/cloudbeaver/workspace",
        "contentRoot": "/opt/cloudbeaver/web",
        "rootURI": "/",
        "serviceURI": "/api/",
        "productConfiguration": {},
        "expireSessionAfterPeriod": 1800000,
        "database": {
          "driver": "h2_embedded_v2",
          "url": "jdbc:h2:/opt/cloudbeaver/workspace/.data/cb.h2v2.dat",
          "initialDataConfiguration": "/opt/cloudbeaver/conf/initial-data.conf",
          "pool": {
            "minIdleConnections": 4,
            "maxIdleConnections": 10,
            "maxConnections": 100,
            "validationQuery": "SELECT 1"
          }
        },
        "app": {
          "anonymousAccessEnabled": false,
          "authenticationEnabled": true,
          "supportsCustomConnections": true,
          "publicCredentialsSaveEnabled": true,
          "adminCredentialsSaveEnabled": true
        }
      }
    }