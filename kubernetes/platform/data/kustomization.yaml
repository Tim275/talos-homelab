apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# ğŸ—„ï¸ PLATFORM DATA DOMAIN - COMPONENT CONTROL
# =============================================
# Comment/Uncomment lines to enable/disable data platform components
# Uncommented = âœ… DEPLOYED | Commented = âŒ DISABLED

resources:
  # ğŸ¯ CHILD APPLICATIONS - APPEAR IN ARGOCD UI
  # ===========================================
  - cloudbeaver/application.yaml
  - influxdb/application.yaml
  - n8n-dev-cnpg/application.yaml
  - n8n-prod-cnpg/application.yaml

  # ğŸ¯ COMPONENTS - KUSTOMIZE CONTROL
  # ==================================
  # ğŸ˜ PostgreSQL Databases
  - n8n-dev-cnpg/                     # âœ… N8N Development PostgreSQL
  - n8n-prod-cnpg/                    # âœ… N8N Production PostgreSQL
  - quantlab-postgres/                # âœ… Analytics PostgreSQL

  # ğŸ“Š Time Series & Analytics
  - influxdb/                         # âœ… Time Series Database

  # ğŸ”§ Database Management Tools
  - cloudbeaver/                      # âœ… Database Admin UI

  # ğŸ—„ï¸ Document Databases (Disabled by default)
  # - mongodb/                        # âŒ DISABLED - Use PostgreSQL instead

  # ğŸ”„ Caching & Session Storage
  - redis-authelia/                   # âœ… Redis for Authelia sessions
  # - memcached/                      # âŒ DISABLED - Not needed currently

# ğŸ¢ Domain Labels
labels:
  - pairs:
      app.kubernetes.io/managed-by: argocd
      app.kubernetes.io/part-of: timour-homelab
      app.kubernetes.io/domain: data
      app.kubernetes.io/layer: platform
      team: timour

# ğŸ“Š Domain Annotations
commonAnnotations:
  argocd.argoproj.io/sync-wave: "15"
  enterprise.domain: "platform-data"
  gitops.control: "kustomize-component-level"
