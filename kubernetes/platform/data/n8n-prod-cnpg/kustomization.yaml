apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization


# Sync Wave 12: Database Clusters (After Operators)
commonAnnotations:
  argocd.argoproj.io/sync-wave: "12"

resources:
  - namespace.yaml
  - credentials-secret.yaml
  # - backup-s3-credentials.yaml  # DISABLED: Barman has issues with Ceph RGW multipart uploads
  - cluster.yaml  # Cluster config (Barman disabled - using Velero CSI snapshots instead)
  # - cluster-with-wal.yaml  # OPTIONAL: Enable for Point-in-Time Recovery (PITR)
  # - scheduled-backup.yaml  # DISABLED: Barman backups don't work with Ceph RGW
  # CloudBeaver is now a separate platform component for database administration
  # ℹ️ Database backups: Using Velero CSI volume snapshots (daily at 4 AM)

labels:
  - pairs:
      app.kubernetes.io/part-of: n8n-data
