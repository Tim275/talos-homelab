# Kafdrop Configuration for Kafka Web UI
# Based on: https://picluster.ricsanfre.com/docs/kafka/

# Kafka broker connection
kafka:
  brokerConnect: my-cluster-kafka-bootstrap:9092

# JVM options for homelab resource limits (reduced to prevent OOMKill)
jvm:
  opts: "-Xms32M -Xmx200M -XX:+UseStringDeduplication"

# Schema registry disabled for now (not deployed yet)
cmdArgs: ""

# Resource limits for homelab (increased to prevent OOMKill)
resources:
  limits:
    cpu: 200m
    memory: 512Mi
  requests:
    cpu: 50m
    memory: 256Mi

# Service configuration
service:
  type: ClusterIP
  port: 9000

# Ingress resource for web access
ingress:
  enabled: true
  ingressClassName: cilium
  className: cilium
  annotations:
    # Skip ArgoCD health check for Cilium ingress compatibility
    argocd.argoproj.io/ignore-healthcheck: "true"
  hosts:
    - kafdrop.homelab.local
  # TLS can be added later with cert-manager
  # tls:
  #   - secretName: kafdrop-tls
  #     hosts:
  #       - kafdrop.homelab.local

# Node affinity for AMD64 (Kafdrop images are not multi-arch)
affinity:
  nodeAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      nodeSelectorTerms:
      - matchExpressions:
        - key: kubernetes.io/arch
          operator: In
          values:
          - amd64

# Security context
podSecurityContext:
  enabled: true
  fsGroup: 1000
  runAsUser: 1000
  runAsNonRoot: true