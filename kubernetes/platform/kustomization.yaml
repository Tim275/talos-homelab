apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# ğŸš€ ENTERPRISE PLATFORM - NON PLUS ULTRA PATTERN!
# ================================================
# TRUE KUSTOMIZE CONTROL - Comment/Uncomment INDIVIDUAL PLATFORM SERVICES!
# Netflix/Google/Meta LEVEL - Granular Platform Service Control!
#
# ğŸ’¡ CONTROL EVERYTHING:
# - Comment service = Platform service DISABLED
# - Uncomment service = Platform service ENABLED
# - NO ApplicationSets needed!
# - PURE KUSTOMIZE POWER!

namespace: argocd

# ğŸ—ï¸ Enterprise Platform Labels
commonLabels:
  app.kubernetes.io/managed-by: argocd
  app.kubernetes.io/part-of: timour-homelab
  app.kubernetes.io/layer: platform
  enterprise.pattern: individual-applications
  control.type: pure-kustomize
  team: timour

# ğŸ“Š Enterprise Annotations
commonAnnotations:
  argocd.argoproj.io/sync-wave: "12"
  enterprise.architecture: "true"
  gitops.pattern: "individual-platform-services"

resources:
  # ğŸ›ï¸ PLATFORM PROJECT
  - project.yaml

  # ğŸ¢ TIER-0 ENTERPRISE PATTERN: ApplicationSet Tree Structure
  # ============================================================
  # Creates visual hierarchy in ArgoCD:
  #   platform-tier (Root)
  #     â””â”€â”€ platform-data (ApplicationSet)
  #           â”œâ”€â”€ influxdb
  #           â”œâ”€â”€ cloudbeaver
  #           â””â”€â”€ mongodb
  #     â””â”€â”€ platform-messaging (ApplicationSet)
  #           â”œâ”€â”€ kafka
  #           â””â”€â”€ schema-registry
  #     â””â”€â”€ platform-developer (ApplicationSet)
  #           â””â”€â”€ backstage

  # ğŸ¯ OPTION 1: ENTERPRISE APPLICATIONSET PATTERN (Netflix/Google/Meta)
  # Uncomment for beautiful tree view in ArgoCD:
  # - platform-data-set.yaml           # Data layer ApplicationSet
  # - platform-messaging-set.yaml      # Messaging layer ApplicationSet
  # - platform-developer-set.yaml      # Developer tools ApplicationSet

  # ğŸ¯ OPTION 2: INDIVIDUAL APPLICATIONS (Current)
  # Comment above, uncomment below for direct control:

  # ğŸ—„ï¸ DATA SERVICES (Wave 12)
  # ==========================
  - influxdb-app.yaml                 # âœ… Time-series database
  - mongodb-app.yaml                  # âœ… Document database
  # - cloudbeaver-app.yaml            # âŒ DB management UI
  # - quantlab-postgres-app.yaml      # âŒ Quantlab database
  # - n8n-app.yaml                    # âŒ Platform N8N (use apps/ instead)

  # ğŸ“¨ MESSAGING SERVICES (Wave 12)
  # ===============================
  - kafka-app.yaml                    # âœ… Message broker
  # - schema-registry-app.yaml        # âŒ Schema management
  # - kafdrop-app.yaml                # âŒ Kafka UI
  # - redpanda-console-app.yaml       # âŒ Alternative Kafka UI

  # ğŸ‘¨â€ğŸ’» DEVELOPER SERVICES (Wave 15)
  # =================================
  - backstage-app.yaml                # âœ… Developer portal
  # - git-ops-app.yaml                # âŒ GitOps tools
  # - ci-cd-app.yaml                  # âŒ CI/CD platform