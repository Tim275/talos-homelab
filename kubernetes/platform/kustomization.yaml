apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# ğŸš€ BOOTSTRAP KUSTOMIZATION - NO HELM CHARTS!
# ===============================================
# This file deploys only ApplicationSets, not the actual components
# Use this for: kubectl apply -k . -o bootstrap-kustomization.yaml

resources:
  # ğŸ›ï¸ PLATFORM PROJECT
  - project.yaml

  # ğŸ¯ PLATFORM APPLICATIONSET (REMOVED for Gitiles Pattern)
  # - applications.yaml

  # ğŸ›ï¸ GITILES PATTERN - TRUE KUSTOMIZE CONTROL!
  # ===============================================
  # Comment/Uncomment lines below to enable/disable components
  # Uncommented = âœ… DEPLOYED | Commented = âŒ DISABLED

  # Data Layer
  # - data/mongodb/                  # âŒ DISABLED - Use PostgreSQL
  - data/cloudbeaver/                # âœ… Database Admin
  # - data/n8n/                      # âŒ DISABLED - Use separate dev/prod
  - data/n8n-dev-cnpg/               # âœ… N8N Dev PostgreSQL
  - data/n8n-prod-cnpg/              # âœ… N8N Prod PostgreSQL
  - data/influxdb/                   # âœ… Time Series Database
  - data/quantlab-postgres/          # âœ… Analytics Database
  # - data/redis/                    # âŒ DISABLED - Use MongoDB

  # Identity Layer
  - identity/lldap/                  # âœ… Lightweight LDAP (User Directory)
  - identity/authelia/               # âœ… OIDC Provider (with LLDAP backend)

  # Developer Layer
  - developer/backstage/             # âœ… Developer Portal
  # - developer/gitea/               # âŒ DISABLED - Use GitHub
  # - developer/jenkins/             # âŒ DISABLED - Use GitHub Actions

# ğŸ“Š Enterprise Annotations
commonAnnotations:
  argocd.argoproj.io/sync-wave: "12"
  enterprise.architecture: "true"
  gitops.pattern: "applicationset-bootstrap"