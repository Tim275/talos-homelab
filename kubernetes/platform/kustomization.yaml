apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# 🚀 BOOTSTRAP KUSTOMIZATION - NO HELM CHARTS!
# ===============================================
# This file deploys only ApplicationSets, not the actual components
# Use this for: kubectl apply -k . -o bootstrap-kustomization.yaml

resources:
  # 🏛️ PLATFORM PROJECT
  - project.yaml

  # 🎯 PLATFORM APPLICATIONSET (REMOVED for Gitiles Pattern)
  # - applications.yaml

  # 🎛️ GITILES PATTERN - TRUE KUSTOMIZE CONTROL!
  # ===============================================
  # Comment/Uncomment lines below to enable/disable components
  # Uncommented = ✅ DEPLOYED | Commented = ❌ DISABLED

  # Data Layer
  # - data/mongodb/                  # ❌ DISABLED - Use PostgreSQL
  - data/cloudbeaver/                # ✅ Database Admin
  - data/n8n/                        # ✅ Workflow Automation
  - data/influxdb/                   # ✅ Time Series Database
  - data/quantlab-postgres/          # ✅ Analytics Database
  # - data/redis/                    # ❌ DISABLED - Use MongoDB

  # Identity Layer
  - identity/lldap/                  # ✅ Lightweight LDAP (User Directory)
  - identity/authelia/               # ✅ OIDC Provider (with LLDAP backend)

  # Developer Layer
  - developer/backstage/             # ✅ Developer Portal
  # - developer/gitea/               # ❌ DISABLED - Use GitHub
  # - developer/jenkins/             # ❌ DISABLED - Use GitHub Actions

# 📊 Enterprise Annotations
commonAnnotations:
  argocd.argoproj.io/sync-wave: "12"
  enterprise.architecture: "true"
  gitops.pattern: "applicationset-bootstrap"