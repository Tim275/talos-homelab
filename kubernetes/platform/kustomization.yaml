apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# 🏢 PLATFORM LAYER - TRUE ENTERPRISE TIER-0
# ===========================================
# Netflix/Google/Amazon Pattern: Pure Kustomize Control auf allen 3 Ebenen

# 🏢 Enterprise Platform Labels
labels:
  - pairs:
      app.kubernetes.io/managed-by: argocd
      app.kubernetes.io/part-of: timour-homelab
      app.kubernetes.io/layer: platform
      enterprise.pattern: direct-domains
      team: timour

# 🌊 Sync Wave 15: Platform Layer (After Infrastructure)
commonAnnotations:
  argocd.argoproj.io/sync-wave: "15"
  enterprise.architecture: "true"
  gitops.pattern: "direct-domain-control"

resources:
  # 🏛️ PLATFORM PROJECT
  - project.yaml

  # 🎯 APPLICATIONSETS - KUBECTL APPLY -K COMPATIBLE!
  # ===============================================
  # NO HELM CHARTS = kubectl apply -k funktioniert!

  # 🎛️ Platform ApplicationSets - Domain-based overview
  - applications.yaml

  # 🎛️ TIER-3 COMPONENT CONTROL - PURE KUSTOMIZE!
  # ==============================================
  # Each domain directory contains its own kustomization.yaml with component control:
  # - data/kustomization.yaml manages cloudbeaver, influxdb, postgresql
  # - messaging/kustomization.yaml manages kafka, nats, rabbitmq
  # - developer/kustomization.yaml manages backstage, documentation
  #
  # 💡 PURE KUSTOMIZE CONTROL: Comment/uncomment resources in domain files!