apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# 🚀 ENTERPRISE PLATFORM - NON PLUS ULTRA PATTERN!
# ================================================
# TRUE KUSTOMIZE CONTROL - Comment/Uncomment INDIVIDUAL PLATFORM SERVICES!
# Netflix/Google/Meta LEVEL - Granular Platform Service Control!
#
# 💡 CONTROL EVERYTHING:
# - Comment service = Platform service DISABLED
# - Uncomment service = Platform service ENABLED
# - NO ApplicationSets needed!
# - PURE KUSTOMIZE POWER!

namespace: argocd

# 🏗️ Enterprise Platform Labels
labels:
  - pairs:
      app.kubernetes.io/managed-by: argocd
      app.kubernetes.io/part-of: timour-homelab
      app.kubernetes.io/layer: platform
      enterprise.pattern: individual-applications
      control.type: pure-kustomize
      team: timour

# 📊 Enterprise Annotations
commonAnnotations:
  argocd.argoproj.io/sync-wave: "12"
  enterprise.architecture: "true"
  gitops.pattern: "individual-platform-services"

resources:
  # 🏛️ PLATFORM PROJECT
  - project.yaml

  # 🏢 TIER-0 ENTERPRISE PATTERN: Same as Infrastructure!
  # ======================================================
  # Creates visual hierarchy in ArgoCD:
  #   tier0-platform (Root)
  #     └── platform-data (ApplicationSet)
  #           ├── influxdb
  #           ├── cloudbeaver
  #           └── mongodb
  #     └── platform-messaging (ApplicationSet)
  #           ├── kafka
  #           └── schema-registry
  #     └── platform-developer (ApplicationSet)
  #           └── backstage

  # 🎯 OPTION 1: ENTERPRISE APPLICATIONSET PATTERN (Netflix/Google/Meta)
  # Uncomment for beautiful tree view in ArgoCD:
  # - platform-data.yaml               # Data layer ApplicationSet
  # - platform-messaging.yaml          # Messaging layer ApplicationSet
  # - platform-developer.yaml          # Developer tools ApplicationSet

  # 🎯 OPTION 2: INDIVIDUAL APPLICATIONS (Current)
  # Comment above, uncomment below for direct control:

  # 🗄️ DATA SERVICES (Wave 12)
  # ==========================
  - influxdb-app.yaml                 # ✅ Time-series database
  - mongodb-app.yaml                  # ✅ Document database
  - cloudbeaver-app.yaml              # ✅ DB management UI
  # - quantlab-postgres-app.yaml      # ❌ Quantlab database
  # - n8n-app.yaml                    # ❌ Platform N8N (use apps/ instead)

  # 📨 MESSAGING SERVICES (Wave 12)
  # ===============================
  - kafka-app.yaml                    # ✅ Message broker
  - schema-registry-app.yaml          # ✅ Schema management
  # - kafdrop-app.yaml                # ❌ Kafka UI (replaced by Redpanda)
  - redpanda-console-app.yaml         # ✅ Modern Kafka UI

  # 👨‍💻 DEVELOPER SERVICES (Wave 15)
  # =================================
  # - backstage-app.yaml              # ❌ Developer portal (no implementation)
  # - git-ops-app.yaml                # ❌ GitOps tools (no implementation)
  # - ci-cd-app.yaml                  # ❌ CI/CD platform (no implementation)