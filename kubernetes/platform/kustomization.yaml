apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# 🚀 BOOTSTRAP KUSTOMIZATION - NO HELM CHARTS!
# ===============================================
# This file deploys only ApplicationSets, not the actual components
# Use this for: kubectl apply -k . -o bootstrap-kustomization.yaml

resources:
  # 🏛️ PLATFORM PROJECT
  - project.yaml

  # 🎯 PLATFORM DOMAIN APPLICATIONSETS - ENTERPRISE TIER-2 PATTERN!
  # ================================================================
  # Each domain gets its own ApplicationSet for clean UI hierarchy
  - data-applicationset.yaml         # 🗄️ Databases, Data Stores, Analytics
  - messaging-applicationset.yaml    # 📨 Event Streaming, Message Queues
  - identity-applicationset.yaml     # 🔐 LDAP, OIDC, Authentication Services
  - developer-applicationset.yaml    # 👨‍💻 Developer Portals, Backstage, Documentation

  # 🎯 OLD MEGA APPLICATIONSET (DISABLED - caused UI chaos)
  # - applications.yaml

  # 🎛️ DOMAIN APPLICATIONSETS NOW HANDLE COMPONENT CONTROL!
  # ========================================================
  # The individual domain ApplicationSets now discover and deploy components:
  # - data-applicationset.yaml manages data/*
  # - messaging-applicationset.yaml manages messaging/*
  # - identity-applicationset.yaml manages identity/*
  # - developer-applicationset.yaml manages developer/*
  #
  # 💡 ENABLE/DISABLE CONTROL moved to individual component kustomization.yaml files!

# 📊 Enterprise Annotations
commonAnnotations:
  argocd.argoproj.io/sync-wave: "12"
  enterprise.architecture: "true"
  gitops.pattern: "applicationset-bootstrap"