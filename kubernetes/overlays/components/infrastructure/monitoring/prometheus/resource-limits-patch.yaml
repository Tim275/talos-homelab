# Prometheus Resource Reduction Patch
# Reduce memory consumption from 1GB to 400Mi for homelab stability
apiVersion: monitoring.coreos.com/v1
kind: Prometheus
metadata:
  name: prometheus-operator-kube-p-prometheus
spec:
  resources:
    requests:
      memory: "400Mi"    # Reduced from ~1Gi
      cpu: "100m"        # Reduced from ~500m
    limits:
      memory: "800Mi"    # Reduced from ~2Gi
      cpu: "250m"        # Reduced from ~1000m
  retention: "6h"        # Reduced from 24h to save storage
  # Reduce storage size
  storageSpec:
    volumeClaimTemplate:
      spec:
        resources:
          requests:
            storage: "5Gi"  # Reduced from 10Gi