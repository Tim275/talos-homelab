apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Homelab Profile - Your Custom Enterprise Setup
# Mix of infrastructure + platform components optimized for homelab

metadata:
  name: homelab-profile
  annotations:
    platform.config/profile: "homelab"
    platform.config/description: "Custom homelab setup with selected enterprise features"
    platform.config/target-env: "homelab-production"

resources:
  # CRDs first (always needed)
  - ../../../crds
  
  # Your existing infrastructure (unchanged!)
  - ../../../bootstrap-infrastructure.yaml
  
  # Additional platform components (NEW!)
  # Data Layer
  - ../../components/platform/data/cloudnative-pg     # ✅ PostgreSQL Operator  
  - ../../components/platform/data/mongodb-operator   # ✅ MongoDB Operator
  # - ../../components/platform/data/redis-operator   # ❌ Optional for future
  
  # Security Layer (future)
  # - ../../components/platform/security/opa          # ❌ Not yet implemented
  # - ../../components/platform/security/falco        # ❌ Not yet implemented

commonLabels:
  profile: homelab
  environment: production
  managed-by: homelab-admin
  tier: enterprise-homelab

# Homelab-specific patches
patchesStrategicMerge:
  - homelab-overrides.yaml

namespace: argocd