# Cluster-Wide Strict mTLS Policy
# All service-to-service communication MUST use mTLS
apiVersion: security.istio.io/v1
kind: PeerAuthentication
metadata:
  name: default-strict-mtls
  namespace: istio-system
spec:
  mtls:
    mode: STRICT  # Enforce mTLS for ALL services in the mesh
---
# PeerAuthentication for Order Management Namespace (Example)
apiVersion: security.istio.io/v1
kind: PeerAuthentication
metadata:
  name: order-management-mtls
  namespace: order-management  # Replace with your namespace
spec:
  mtls:
    mode: STRICT
  portLevelMtls:
    # Optional: Disable mTLS for specific ports (e.g., health checks)
    # 8080:
    #   mode: PERMISSIVE
