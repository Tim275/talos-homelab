apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# üéØ TRUE KUSTOMIZE CONTROL - COMMENT/UNCOMMENT = ENABLE/DISABLE!
# ===============================================================
# This is what you wanted for 35 hours! Pure kustomize control!

commonLabels:
  app.kubernetes.io/managed-by: argocd
  infrastructure.domain: network

# üåä Sync Wave 1: Network Foundation Layer
commonAnnotations:
  argocd.argoproj.io/sync-wave: "1"

resources:
  # üéØ CHILD APPLICATIONS - APPEAR IN ARGOCD UI
  # ===========================================
  - cilium/application.yaml
  - gateway/application.yaml
  - sail-operator/application.yaml
  - istio-control-plane/application.yaml
  - cloudflared/application.yaml

  # üéØ NETWORK COMPONENTS - KUSTOMIZE CONTROL
  # ==========================================
  - cilium/
  - gateway/
  - sail-operator/
  - istio-control-plane/
  - cloudflared/

  # ‚ùå DISABLED NETWORK COMPONENTS
  # - istio-cni/         # PodSecurity violations
  # - istio-gateway/     # Invalid 'auto' image issue
  # - istio-base/        # Replaced by sail-operator
  # - metallb/           # Using Cilium LoadBalancer
  # - istio/             # Old setup
  # - layers/            # Not needed
  # - load-balancing/    # Using Cilium