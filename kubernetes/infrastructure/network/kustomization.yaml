apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# ğŸ¯ TRUE KUSTOMIZE CONTROL - COMMENT/UNCOMMENT = ENABLE/DISABLE!
# ===============================================================
# This is what you wanted for 35 hours! Pure kustomize control!

commonLabels:
  app.kubernetes.io/managed-by: argocd
  infrastructure.domain: network

# ğŸŒŠ Sync Wave 1: Network Foundation Layer
commonAnnotations:
  argocd.argoproj.io/sync-wave: "1"

resources:
  # ğŸ¯ NETWORK COMPONENTS - COMMENT/UNCOMMENT TO CONTROL!
  # ====================================================

  # âœ… ENABLED NETWORK COMPONENTS
  - cilium/              # CNI + Service Mesh + Load Balancing
  - gateway/             # Kubernetes Gateway API

  # ğŸ” Service Mesh (Istio Ambient) - Modern 2025 Sail Operator Pattern
  - sail-operator/       # Sail Operator (Lifecycle Management + Base CRDs)
  - istio-control-plane/ # Istio CR (after Operator CRDs)
  - istio-cni/           # CNI
  - istio-gateway/       # Gateway

  # ğŸŒ External Connectivity
  - cloudflared/         # Cloudflare tunnels

  # âŒ DISABLED NETWORK COMPONENTS (comment out to disable)
  # - istio-base/        # âŒ DISABLED - Replaced by sail-operator (modern approach)
  # - metallb/           # âŒ DISABLED - Using Cilium LoadBalancer instead
  # - istio/             # âŒ DISABLED - Old istio setup
  # - layers/            # âŒ DISABLED - Not needed
  # - load-balancing/    # âŒ DISABLED - Using Cilium instead