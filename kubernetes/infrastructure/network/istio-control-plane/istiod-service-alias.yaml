# Service alias for ztunnel compatibility
# ZTunnel expects istiod.istio-system.svc but Sail Operator creates istiod-<revision>
apiVersion: v1
kind: Service
metadata:
  name: istiod
  namespace: istio-system
  labels:
    app: istiod
    istio: pilot
spec:
  ports:
    - port: 15010
      name: grpc-xds
      protocol: TCP
      targetPort: 15010
    - port: 15012
      name: https-dns
      protocol: TCP
      targetPort: 15012
    - port: 443
      name: https-webhook
      protocol: TCP
      targetPort: 443
    - port: 15014
      name: http-monitoring
      protocol: TCP
      targetPort: 15014
  selector:
    app: istiod
    istio.io/rev: default-v1-27-1
  type: ClusterIP
