apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namePrefix: network-

# ðŸŒŠ Sync Wave 2: Istio Control Plane (after Sail Operator CRDs)
# Note: Parent commonAnnotations will override, need to patch

namespace: istio-system

resources:
  - application.yaml           # âœ… Child Application for App-of-Apps pattern
  - istio-control-plane.yaml
  - telemetry-config.yaml  # Istio Telemetry in istio-system

patches:
  - target:
      kind: Istio
      name: default
    patch: |-
      - op: replace
        path: /metadata/annotations/argocd.argoproj.io~1sync-wave
        value: "2"
