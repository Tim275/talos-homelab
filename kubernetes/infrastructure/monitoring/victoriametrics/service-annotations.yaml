# ðŸŽ¯ CENTRALIZED SERVICE MONITORING ANNOTATIONS
# This file defines which services should be scraped by VictoriaMetrics
# Add prometheus.io/scrape=true only to services that actually expose metrics

---
# ArgoCD Server - Metrics on port 8083
apiVersion: v1
kind: Service
metadata:
  name: argocd-server
  namespace: argocd
  annotations:
    prometheus.io/scrape: "true"
    prometheus.io/port: "8083"
    prometheus.io/path: "/metrics"

---
# ArgoCD Repo Server - Metrics on port 8084
apiVersion: v1
kind: Service
metadata:
  name: argocd-repo-server
  namespace: argocd
  annotations:
    prometheus.io/scrape: "true"
    prometheus.io/port: "8084"
    prometheus.io/path: "/metrics"

---
# ArgoCD Application Controller - Metrics on port 8082
apiVersion: v1
kind: Service
metadata:
  name: argocd-application-controller
  namespace: argocd
  annotations:
    prometheus.io/scrape: "true"
    prometheus.io/port: "8082"
    prometheus.io/path: "/metrics"

---
# ArgoCD ApplicationSet Controller - Metrics on port 8080
apiVersion: v1
kind: Service
metadata:
  name: argocd-applicationset-controller
  namespace: argocd
  annotations:
    prometheus.io/scrape: "true"
    prometheus.io/port: "8080"
    prometheus.io/path: "/metrics"

---
# ArgoCD Redis Exporter Sidecar - Metrics on port 9121
apiVersion: v1
kind: Service
metadata:
  name: argocd-redis-metrics
  namespace: argocd
  annotations:
    prometheus.io/scrape: "true"
    prometheus.io/port: "9121"
    prometheus.io/path: "/metrics"

---
# Argo Rollouts Controller - Metrics on port 8090
apiVersion: v1
kind: Service
metadata:
  name: argo-rollouts-metrics
  namespace: argocd
  annotations:
    prometheus.io/scrape: "true"
    prometheus.io/port: "8090"
    prometheus.io/path: "/metrics"

---
# Sealed Secrets Controller - Metrics on port 8081
apiVersion: v1
kind: Service
metadata:
  name: sealed-secrets-controller-metrics
  namespace: sealed-secrets
  annotations:
    prometheus.io/scrape: "true"
    prometheus.io/port: "8081"
    prometheus.io/path: "/metrics"

---
# CloudNative PG Operator - Metrics on port 8080 with HTTPS
apiVersion: v1
kind: Service
metadata:
  name: cnpg-controller-manager-metrics
  namespace: cnpg-system
  annotations:
    prometheus.io/scrape: "true"
    prometheus.io/port: "8080"
    prometheus.io/path: "/metrics"
    prometheus.io/scheme: "https"

---
# Rook Ceph Operator - Metrics on port 8080
apiVersion: v1
kind: Service
metadata:
  name: rook-ceph-operator-metrics
  namespace: rook-ceph
  annotations:
    prometheus.io/scrape: "true"
    prometheus.io/port: "8080"
    prometheus.io/path: "/metrics"

---
# Cert Manager Controller - Metrics on port 9402
apiVersion: v1
kind: Service
metadata:
  name: cert-manager-metrics
  namespace: cert-manager
  annotations:
    prometheus.io/scrape: "true"
    prometheus.io/port: "9402"
    prometheus.io/path: "/metrics"

---
# VictoriaMetrics Cluster Components
apiVersion: v1
kind: Service
metadata:
  name: vmselect-vm-cluster
  namespace: monitoring
  annotations:
    prometheus.io/scrape: "true"
    prometheus.io/port: "8481"
    prometheus.io/path: "/metrics"

---
apiVersion: v1
kind: Service
metadata:
  name: vminsert-vm-cluster
  namespace: monitoring
  annotations:
    prometheus.io/scrape: "true"
    prometheus.io/port: "8480"
    prometheus.io/path: "/metrics"

---
apiVersion: v1
kind: Service
metadata:
  name: vmstorage-vm-cluster
  namespace: monitoring
  annotations:
    prometheus.io/scrape: "true"
    prometheus.io/port: "8482"
    prometheus.io/path: "/metrics"