# üöÄ COMPLETE SERVICEMONITOR COLLECTION FOR ALL APPLICATIONS
# ============================================================
# Comprehensive monitoring setup for entire homelab infrastructure
---
# üîÑ ARGO ROLLOUTS - Progressive Delivery
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: argo-rollouts-metrics
  namespace: monitoring
  labels:
    app.kubernetes.io/name: argo-rollouts
    release: prometheus-operator
    team: platform
spec:
  namespaceSelector:
    matchNames:
    - argo-rollouts
  selector:
    matchLabels:
      app.kubernetes.io/name: argo-rollouts-metrics
  endpoints:
  - port: metrics
    path: /metrics
    interval: 30s
---
# üîê CERT-MANAGER - Certificate Management
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: cert-manager-controller
  namespace: monitoring
  labels:
    app.kubernetes.io/name: cert-manager
    release: prometheus-operator
    team: platform
spec:
  namespaceSelector:
    matchNames:
    - cert-manager
  selector:
    matchLabels:
      app: cert-manager
  endpoints:
  - port: "9402"
    path: /metrics
    interval: 30s
---
# üîê CERT-MANAGER CAINJECTOR
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: cert-manager-cainjector
  namespace: monitoring
  labels:
    app.kubernetes.io/name: cert-manager-cainjector
    release: prometheus-operator
    team: platform
spec:
  namespaceSelector:
    matchNames:
    - cert-manager
  selector:
    matchLabels:
      app: cainjector
  endpoints:
  - port: "9402"
    path: /metrics
    interval: 30s
---
# üîê CERT-MANAGER WEBHOOK
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: cert-manager-webhook
  namespace: monitoring
  labels:
    app.kubernetes.io/name: cert-manager-webhook
    release: prometheus-operator
    team: platform
spec:
  namespaceSelector:
    matchNames:
    - cert-manager
  selector:
    matchLabels:
      app: webhook
  endpoints:
  - port: "9402"
    path: /metrics
    interval: 30s
---
# ‚òÅÔ∏è CLOUDFLARED - Tunnel
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: cloudflared
  namespace: monitoring
  labels:
    app.kubernetes.io/name: cloudflared
    release: prometheus-operator
    team: platform
spec:
  namespaceSelector:
    matchNames:
    - cloudflared
  selector:
    matchLabels:
      app.kubernetes.io/name: cloudflared
  endpoints:
  - port: metrics
    path: /metrics
    interval: 30s
---
# üóÑÔ∏è CNPG - CloudNative PostgreSQL Operator
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: cnpg-controller-manager
  namespace: monitoring
  labels:
    app.kubernetes.io/name: cloudnative-pg
    release: prometheus-operator
    team: platform
spec:
  namespaceSelector:
    matchNames:
    - cnpg-system
  selector:
    matchLabels:
      app.kubernetes.io/name: cloudnative-pg
  endpoints:
  - port: metrics
    path: /metrics
    interval: 30s
---
# üîç ELASTICSEARCH OPERATOR
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: elastic-operator
  namespace: monitoring
  labels:
    app.kubernetes.io/name: elastic-operator
    release: prometheus-operator
    team: platform
spec:
  namespaceSelector:
    matchNames:
    - elastic-system
  selector:
    matchLabels:
      control-plane: elastic-operator
  endpoints:
  - port: https
    path: /metrics
    interval: 30s
    scheme: https
    tlsConfig:
      insecureSkipVerify: true
---
# üìä VECTOR LOG AGGREGATOR
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: vector-aggregator
  namespace: monitoring
  labels:
    app.kubernetes.io/name: vector
    release: prometheus-operator
    team: platform
spec:
  namespaceSelector:
    matchNames:
    - elastic-system
  selector:
    matchLabels:
      app.kubernetes.io/name: vector
      app.kubernetes.io/component: Aggregator
  endpoints:
  - port: api
    path: /metrics
    interval: 30s
---
# üìä VECTOR AGENTS (Node-level)
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: vector-agent
  namespace: monitoring
  labels:
    app.kubernetes.io/name: vector-agent
    release: prometheus-operator
    team: platform
spec:
  namespaceSelector:
    matchNames:
    - elastic-system
  selector:
    matchLabels:
      app.kubernetes.io/name: vector
      app.kubernetes.io/component: Agent
  endpoints:
  - port: api
    path: /metrics
    interval: 30s
---
# üö™ ENVOY GATEWAY
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: envoy-gateway
  namespace: monitoring
  labels:
    app.kubernetes.io/name: envoy-gateway
    release: prometheus-operator
    team: platform
spec:
  namespaceSelector:
    matchNames:
    - envoy-gateway-system
  selector:
    matchLabels:
      control-plane: envoy-gateway
  endpoints:
  - port: metrics
    path: /metrics
    interval: 30s
---
# üåä ISTIO CONTROL PLANE
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: istiod
  namespace: monitoring
  labels:
    app.kubernetes.io/name: istiod
    release: prometheus-operator
    team: platform
spec:
  namespaceSelector:
    matchNames:
    - istio-system
  selector:
    matchLabels:
      app: istiod
  endpoints:
  - port: http-monitoring
    path: /stats/prometheus
    interval: 30s
---
# üåä ISTIO CNI
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: istio-cni
  namespace: monitoring
  labels:
    app.kubernetes.io/name: istio-cni
    release: prometheus-operator
    team: platform
spec:
  namespaceSelector:
    matchNames:
    - istio-system
  selector:
    matchLabels:
      k8s-app: istio-cni-node
  endpoints:
  - port: http-monitoring
    path: /stats/prometheus
    interval: 30s
---
# ‚õµ SAIL OPERATOR - Istio Management
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: sail-operator
  namespace: monitoring
  labels:
    app.kubernetes.io/name: sail-operator
    release: prometheus-operator
    team: platform
spec:
  namespaceSelector:
    matchNames:
    - istio-system
  selector:
    matchLabels:
      app.kubernetes.io/name: sail-operator
  endpoints:
  - port: metrics
    path: /metrics
    interval: 30s
---
# üö™ ISTIO GATEWAY
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: istio-gateway
  namespace: monitoring
  labels:
    app.kubernetes.io/name: istio-gateway
    release: prometheus-operator
    team: platform
spec:
  namespaceSelector:
    matchNames:
    - istio-ingress
  selector:
    matchLabels:
      app: istio-gateway
  endpoints:
  - port: http-stats
    path: /stats/prometheus
    interval: 30s
---
# üîç JAEGER OPERATOR
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: jaeger-operator
  namespace: monitoring
  labels:
    app.kubernetes.io/name: jaeger-operator
    release: prometheus-operator
    team: platform
spec:
  namespaceSelector:
    matchNames:
    - jaeger
  selector:
    matchLabels:
      name: jaeger-operator
  endpoints:
  - port: metrics
    path: /metrics
    interval: 30s
---
# üîç JAEGER ALL-IN-ONE
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: jaeger-allinone
  namespace: monitoring
  labels:
    app.kubernetes.io/name: jaeger
    release: prometheus-operator
    team: platform
spec:
  namespaceSelector:
    matchNames:
    - jaeger
  selector:
    matchLabels:
      app.kubernetes.io/name: jaeger
  endpoints:
  - port: admin-http
    path: /metrics
    interval: 30s
---
# üí∞ OPENCOST - Cost Monitoring
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: opencost
  namespace: monitoring
  labels:
    app.kubernetes.io/name: opencost
    release: prometheus-operator
    team: platform
spec:
  namespaceSelector:
    matchNames:
    - opencost
  selector:
    matchLabels:
      app.kubernetes.io/name: opencost
  endpoints:
  - port: http
    path: /metrics
    interval: 30s
---
# üî≠ OPENTELEMETRY COLLECTOR
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: opentelemetry-collector
  namespace: monitoring
  labels:
    app.kubernetes.io/name: opentelemetry-collector
    release: prometheus-operator
    team: platform
spec:
  namespaceSelector:
    matchNames:
    - opentelemetry
  selector:
    matchLabels:
      app.kubernetes.io/name: opentelemetry-collector
  endpoints:
  - port: metrics
    path: /metrics
    interval: 30s
---
# üî≠ OPENTELEMETRY OPERATOR
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: opentelemetry-operator
  namespace: monitoring
  labels:
    app.kubernetes.io/name: opentelemetry-operator
    release: prometheus-operator
    team: platform
spec:
  namespaceSelector:
    matchNames:
    - opentelemetry
  selector:
    matchLabels:
      app.kubernetes.io/name: opentelemetry-operator
  endpoints:
  - port: metrics
    path: /metrics
    interval: 30s
---
# üîí SEALED SECRETS CONTROLLER
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: sealed-secrets-controller
  namespace: monitoring
  labels:
    app.kubernetes.io/name: sealed-secrets
    release: prometheus-operator
    team: platform
spec:
  namespaceSelector:
    matchNames:
    - sealed-secrets
  selector:
    matchLabels:
      name: sealed-secrets-controller
  endpoints:
  - port: http
    path: /metrics
    interval: 30s
---
# üíæ VELERO - Backup Solution
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: velero
  namespace: monitoring
  labels:
    app.kubernetes.io/name: velero
    release: prometheus-operator
    team: platform
spec:
  namespaceSelector:
    matchNames:
    - velero
  selector:
    matchLabels:
      deploy: velero
  endpoints:
  - port: http-monitoring
    path: /metrics
    interval: 30s
