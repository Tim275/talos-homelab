apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# ğŸ¯ TRUE KUSTOMIZE CONTROL - COMMENT/UNCOMMENT = ENABLE/DISABLE!
# ===============================================================
# This is what you wanted for 35 hours! Pure kustomize control!

commonLabels:
  app.kubernetes.io/managed-by: argocd
  infrastructure.domain: monitoring

# ğŸŒŠ Sync Wave 5: Monitoring (After Storage)
commonAnnotations:
  argocd.argoproj.io/sync-wave: "5"

resources:
  # ğŸ¯ MONITORING COMPONENTS - COMMENT/UNCOMMENT TO CONTROL!
  # =======================================================

  # ğŸ—ï¸ INFRASTRUCTURE (Wave 0)
  - namespace.yaml     # âœ… Monitoring namespace with privileged PodSecurity

  # âœ… ENABLED INDIVIDUAL MICROSERVICES (restored beautiful architecture!)
  - prometheus-server/ # âœ… Individual Prometheus Server microservice
  - grafana/           # âœ… Individual Grafana microservice
  - alertmanager/      # âœ… Individual AlertManager microservice
  - loki/              # âœ… Individual Loki microservice
  - metrics-server/    # âœ… Kubernetes Metrics API

  # âŒ DISABLED MONITORING COMPONENTS (comment out to disable)
  # - prometheus/      # âŒ DISABLED - Monolithic kube-prometheus-stack
  # - jaeger/          # âŒ DISABLED - Not needed yet
  # - opencost/        # âŒ DISABLED - Cost optimization not needed yet
  # - hubble/          # âŒ DISABLED - Cilium observability not needed yet