apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - ns.yaml
  - grafana.yaml
  - grafana-operator-dashboard.yaml
  - http-route.yaml
  - http-route-http.yaml
  # - admin-credentials.yaml          # ‚ùå DISABLED: SealedSecret decryption failing
  # - oidc-credentials.yaml           # ‚ùå DISABLED: SealedSecret decryption failing
  - datasources/alertmanager-operated.yaml
  - datasources/prometheus-operated.yaml
  - datasources/loki.yaml

  # üè¢ ENTERPRISE DASHBOARD HIERARCHY - Google/Netflix/Meta Pattern
  # Executive Level - C-Suite Overview
  - dashboards/executive/homelab-overview.yaml
  - dashboards/executive/resource-costs.yaml

  # Infrastructure Level - Core Platform
  - dashboards/infrastructure/argocd-gitops.yaml
  - dashboards/infrastructure/cert-manager-ssl.yaml
  - dashboards/infrastructure/cilium-network.yaml
  - dashboards/infrastructure/istio-service-mesh.yaml
  - dashboards/infrastructure/envoy-gateway.yaml

  # Networking Level - eBPF Observability
  - dashboards/networking/cilium-hubble.yaml

  # GitOps Level - ArgoCD Performance (Expanded with Official Dashboards)
  - dashboards/gitops/argocd-application-performance.yaml
  - dashboards/gitops/argocd-repository-health.yaml
  - dashboards/gitops/argocd-executive-overview.yaml
  - dashboards/gitops/argocd-security-compliance.yaml
  - dashboards/gitops/argocd-developer-experience.yaml
  - dashboards/gitops/argocd-cluster-management.yaml
  - dashboards/gitops/argocd-notifications-alerts.yaml
  # Official ArgoCD Dashboards from Grafana.com
  - dashboards/gitops/argocd-official-14584.yaml
  - dashboards/gitops/argocd-operational-19993.yaml
  - dashboards/gitops/argocd-application-19974.yaml
  - dashboards/gitops/argocd-notifications-19975.yaml

  # Infrastructure Level - System Dashboards
  - dashboards/infrastructure/kubernetes-cluster-overview.yaml
  - dashboards/infrastructure/talos-system-overview.yaml
  - dashboards/infrastructure/pod-level-performance.yaml

  # Networking Level - Service Mesh & Traffic
  - dashboards/networking/istio-mesh-overview.yaml
  - dashboards/networking/istio-security-policies.yaml
  - dashboards/networking/hubble-flow-analytics.yaml
  - dashboards/networking/unifi-network-insights.yaml
  - dashboards/networking/unifi-wireless-insights.yaml

  # Service Mesh Level - Istio Enterprise Dashboards (5 Dashboards)
  - dashboards/istio/istio-overview.yaml
  - dashboards/istio/istio-service-performance.yaml
  - dashboards/istio/istio-control-plane.yaml
  - dashboards/istio/istio-security-mtls.yaml
  - dashboards/istio/istio-workload-dashboard.yaml

  # Storage Level - Data Layer
  - dashboards/storage/rook-ceph-cluster.yaml
  - dashboards/storage/ceph-pools.yaml
  - dashboards/storage/ceph-osd-performance.yaml
  - dashboards/storage/ceph-cluster-overview.yaml
  - dashboards/storage/ceph-osd-details.yaml
  - dashboards/storage/ceph-pools-detailed.yaml
  - dashboards/storage/cnpg-postgresql.yaml
  - dashboards/storage/velero-backup.yaml
  # Official Rook Ceph Dashboards from Grafana.com
  - dashboards/rook-ceph/ceph-cluster-health-2842.yaml
  - dashboards/rook-ceph/ceph-osd-single-5336.yaml
  - dashboards/rook-ceph/ceph-pools-5342.yaml

  # Observability Level - Logging & Monitoring
  - dashboards/observability/vector-logging-pipeline.yaml

  # Platform Level - Services & Databases
  - dashboards/platform/elasticsearch-cluster-health.yaml
  - dashboards/platform/kafka-demo-applications.yaml

  # Security Level - Zero Trust
  - dashboards/security/authelia-identity.yaml
  - dashboards/security/authelia-authentication.yaml
  - dashboards/security/cert-manager-certificate-management.yaml
  - dashboards/security/lldap-directory.yaml
  - dashboards/security/sealed-secrets.yaml

  # Platform Level - Middleware
  - dashboards/platform/kafka-streaming.yaml
  - dashboards/platform/kafka-consumer-lag.yaml
  - dashboards/platform/schema-registry.yaml
  - dashboards/platform/influxdb-timeseries.yaml

  # Kafka Streaming Platform - Enterprise Dashboards (5 Dashboards)
  - dashboards/kafka/kafka-cluster-overview.yaml
  - dashboards/kafka/kafka-producer-metrics.yaml
  - dashboards/kafka/kafka-broker-performance.yaml
  - dashboards/kafka/kafka-topic-analytics.yaml
  - dashboards/kafka/kafka-connect-monitoring.yaml

  # Observability Level - O11y Stack
  - dashboards/observability/loki-logs.yaml
  - dashboards/observability/jaeger-tracing.yaml
  - dashboards/observability/opentelemetry-collector.yaml

  # EFK Stack - Elasticsearch, Fluent-bit, Kibana Enterprise Dashboards
  # Elasticsearch Cluster Monitoring (3 Dashboards + Official)
  - dashboards/elasticsearch/elasticsearch-cluster-status.yaml
  - dashboards/elasticsearch/elasticsearch-index-management.yaml
  - dashboards/elasticsearch/elasticsearch-node-performance.yaml
  # Official Elasticsearch Dashboards from Grafana.com
  - dashboards/elasticsearch/elasticsearch-overview-14191.yaml
  - dashboards/elasticsearch/elasticsearch-cluster-3592.yaml

  # Fluent-bit Log Collection (5 Dashboards)
  - dashboards/fluent-bit/fluent-bit-metrics-overview.yaml
  - dashboards/fluent-bit/fluent-bit-input-plugins.yaml
  - dashboards/fluent-bit/fluent-bit-output-performance.yaml
  - dashboards/fluent-bit/fluent-bit-buffer-management.yaml
  - dashboards/fluent-bit/fluent-bit-error-monitoring.yaml

  # Kibana Analytics Platform (5 Dashboards)
  - dashboards/kibana/kibana-search-analytics.yaml
  - dashboards/kibana/kibana-index-management.yaml
  - dashboards/kibana/kibana-user-behavior.yaml
  - dashboards/kibana/kibana-dashboard-performance.yaml
  - dashboards/kibana/kibana-visualization-metrics.yaml

  # Vector Logging Platform - Rust-based Log Processor (5 Dashboards)
  - dashboards/vector/vector-agent-overview.yaml
  - dashboards/vector/vector-pipeline-performance.yaml
  - dashboards/vector/vector-sources-metrics.yaml
  - dashboards/vector/vector-transform-analytics.yaml
  - dashboards/vector/vector-sinks-output.yaml

  # Applications Level - User Services
  - dashboards/applications/n8n-automation.yaml
  - dashboards/applications/n8n-application-performance.yaml
  - dashboards/applications/audiobookshelf-media.yaml
  - dashboards/applications/audiobookshelf-media-server.yaml
  - dashboards/applications/cloudbeaver-database.yaml
  - dashboards/applications/cloudbeaver-database-management.yaml
  - dashboards/applications/quantlab-trading-platform.yaml

  # üìä DASHBOARD CONFIGMAPS - Legacy (keeping existing ones)
  - dashboards/storage/rook-ceph-configmap.yaml
  - dashboards/infrastructure/argocd-gitops-configmap.yaml
  - dashboards/infrastructure/cert-manager-ssl-configmap.yaml
  - dashboards/infrastructure/cilium-network-configmap.yaml
  - dashboards/infrastructure/envoy-gateway-configmap.yaml
  - dashboards/infrastructure/talos-kubernetes-configmap.yaml
  - dashboards/platform/elasticsearch-configmap.yaml
  - dashboards/platform/kafka-streaming-configmap.yaml
  - dashboards/platform/cnpg-postgresql-configmap.yaml

helmCharts:
  - name: grafana-operator
    repo: oci://ghcr.io/grafana/helm-charts
    includeCRDs: true
    namespace: grafana
    version: v5.19.1 # renovate: github-releases=grafana/grafana-operator
    releaseName: grafana-operator
    valuesFile: ./values.yaml
# Force ArgoCD cache refresh - Sept 28 2025
