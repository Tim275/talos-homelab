apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# ğŸŒŠ Sync Wave 6: Grafana CRD Resources (After Grafana Operator Wave 4)
commonAnnotations:
  argocd.argoproj.io/sync-wave: "6"

# ğŸ¯ GRAFANA OPERATOR PATTERN - Only CRD resources, no Helm chart!
# Grafana Operator (deployed separately) manages the Grafana instance
# ğŸ“Š ConfigMap Dashboards - keep your preferred dashboard pattern
# (These work with both Helm Grafana and Grafana Operator)

# ğŸ¯ NATIVE GRAFANA OPERATOR DASHBOARDS - ConfigMap References
# Links traditional ConfigMaps to GrafanaDashboard CRDs (Vegarn pattern)

# ğŸ¯ GRAFANA OPERATOR DASHBOARDS - Native GrafanaDashboard CRDs
# Enterprise-grade monitoring dashboards using Grafana Operator - Direct URL-based from Grafana.com
resources:
  - grafana-admin-secret.yaml
  - grafana-instance.yaml

  # ğŸ¯ ENTERPRISE DATASOURCE STRATEGY - Multiple Aliases Approach
  - victoriametrics-datasource.yaml  # Primary + DS_PROMETHEUS alias
  - datasource-aliases.yaml          # Additional common aliases (DS__VICTORIAMETRICS, etc.)
  - dashboard-datasource-mappings.yaml # Enhanced dashboards with explicit mapping (optional)
  - loki-datasource.yaml

  # ğŸ“Š DASHBOARD RESOURCES
  - dashboards-configmap.yaml
  - dashboards/
  - configmap-dashboards/
  - dashboards/k8s-comprehensive.yaml
  - dashboards/prometheus-overview.yaml
  - dashboards/elasticsearch-detailed.yaml
  - dashboards/kafka-monitoring.yaml
  - operator-dashboards/

  # âŒ REMOVED: Complex RBAC job-based datasource mapping
  # - prometheus-datasource.yaml       # Replaced by aliases
  # - datasource-fix-rbac.yaml         # No longer needed
  # - datasource-fix-role.yaml         # No longer needed
  # - datasource-fix-rolebinding.yaml  # No longer needed
  # - datasource-fix-job.yaml          # No longer needed

  # ğŸš€ MASSIVE GRAFANA.COM DASHBOARD COLLECTION - CRD Integration
  # These dashboards use grafanaCom: schema which works with Grafana Operator
  - working-kubernetes-dashboard.yaml            # âœ… K8s Global View (ID: 15757)
  - working-kubernetes-comprehensive-dashboard.yaml # âœ… K8s Comprehensive (ID: 13077)
  - working-cilium-dashboard.yaml                # âœ… Cilium Network (ID: 24056)
  - working-elasticsearch-dashboard.yaml         # âœ… Elasticsearch (ID: 14191)
  - working-node-exporter-dashboard.yaml         # âœ… Node Exporter Full (ID: 1860)
  - working-ceph-cluster-dashboard.yaml          # âœ… Ceph Cluster (ID: 2842) - PRIORITY
  - working-ceph-pools-dashboard.yaml            # âœ… Ceph Pools (ID: 5342) - Storage
  - working-redis-dashboard.yaml                 # âœ… Redis Monitoring (ID: 11835)
  - working-cert-manager-dashboard.yaml          # âœ… Cert-Manager (ID: 11001)
  - working-argocd-dashboard.yaml                # âœ… ArgoCD Operational (ID: 19993)

  # ğŸ¢ ENTERPRISE DASHBOARD COLLECTION - Google SRE + AWS/Azure Best Practices
  # Based on 2025 monitoring research: 4 Golden Signals, centralized discovery, performance optimization
  - working-authelia-dashboard.yaml              # âœ… Identity & SSO (ID: 14837)
  - working-hubble-dns-dashboard.yaml            # âœ… DNS Network Monitoring (ID: 16611)
  - working-hubble-l7-dashboard.yaml             # âœ… L7 HTTP Metrics (ID: 16612)
  - working-hubble-network-overview-dashboard.yaml # âœ… Network Overview (ID: 16613)
  - working-grafana-operator-dashboard.yaml      # âœ… Operator Monitoring (ID: 13659)

  # ğŸŒ UNIFI INFRASTRUCTURE MONITORING - Complete Network Infrastructure
  - working-unpoller-usw-dashboard.yaml          # âœ… Switch Insights (ID: 11315)
  - working-unpoller-uap-dashboard.yaml          # âœ… Access Point Insights (ID: 11314)
  - working-unpoller-usg-dashboard.yaml          # âœ… Security Gateway (ID: 11313)
  - working-unpoller-network-sites-dashboard.yaml # âœ… Network Sites (ID: 11311)
  - working-unpoller-client-insights-dashboard.yaml # âœ… Client Insights (ID: 11312)

# ğŸ§¹ BROKEN DASHBOARDS REMOVED (2025-09-25) - Files deleted to clean up Infrastructure folder
# Scripts and documentation:
# - import-batch.sh                     # âœ… Successful API import script
# - import-massive-dashboards.py        # âœ… Python API import script
# - DASHBOARD_IMPORT_SUCCESS.md         # ğŸ“‹ Complete success report
