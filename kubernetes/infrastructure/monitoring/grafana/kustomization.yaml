apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - ns.yaml
  - grafana.yaml
  - grafana-operator-dashboard.yaml
  - http-route.yaml
  - http-route-http.yaml
  # - admin-credentials.yaml          # ‚ùå DISABLED: SealedSecret decryption failing
  # - oidc-credentials.yaml           # ‚ùå DISABLED: SealedSecret decryption failing
  - datasources/alertmanager-operated.yaml
  - datasources/prometheus-operated.yaml
  - datasources/loki.yaml

  # üè¢ ENTERPRISE DASHBOARD HIERARCHY - Google/Netflix/Meta Pattern
  # Executive Level - C-Suite Overview
  - dashboards/executive/homelab-overview.yaml
  - dashboards/executive/resource-costs.yaml

  # Infrastructure Level - Core Platform
  - dashboards/infrastructure/argocd-gitops.yaml
  - dashboards/infrastructure/cert-manager-ssl.yaml
  - dashboards/infrastructure/cilium-network.yaml
  - dashboards/infrastructure/istio-service-mesh.yaml
  - dashboards/infrastructure/envoy-gateway.yaml

  # Storage Level - Data Layer
  - dashboards/storage/rook-ceph-cluster.yaml
  - dashboards/storage/cnpg-postgresql.yaml
  - dashboards/storage/velero-backup.yaml

  # Security Level - Zero Trust
  - dashboards/security/authelia-identity.yaml
  - dashboards/security/lldap-directory.yaml
  - dashboards/security/sealed-secrets.yaml

  # Platform Level - Middleware
  - dashboards/platform/kafka-streaming.yaml
  - dashboards/platform/schema-registry.yaml
  - dashboards/platform/influxdb-timeseries.yaml

  # Observability Level - O11y Stack
  - dashboards/observability/loki-logs.yaml
  - dashboards/observability/jaeger-tracing.yaml
  - dashboards/observability/opentelemetry-collector.yaml

  # Applications Level - User Services
  - dashboards/applications/n8n-automation.yaml
  - dashboards/applications/audiobookshelf-media.yaml
  - dashboards/applications/cloudbeaver-database.yaml

  # üìä DASHBOARD CONFIGMAPS - Real Content
  - dashboards/storage/rook-ceph-configmap.yaml
  - dashboards/infrastructure/argocd-gitops-configmap.yaml
  - dashboards/infrastructure/cert-manager-ssl-configmap.yaml
  - dashboards/infrastructure/cilium-network-configmap.yaml
  - dashboards/infrastructure/envoy-gateway-configmap.yaml
  - dashboards/infrastructure/talos-kubernetes-configmap.yaml
  - dashboards/platform/elasticsearch-configmap.yaml
  - dashboards/platform/kafka-streaming-configmap.yaml
  - dashboards/platform/cnpg-postgresql-configmap.yaml

helmCharts:
  - name: grafana-operator
    repo: oci://ghcr.io/grafana/helm-charts
    includeCRDs: true
    namespace: grafana
    version: v5.19.1 # renovate: github-releases=grafana/grafana-operator
    releaseName: grafana-operator
    valuesFile: ./values.yaml
