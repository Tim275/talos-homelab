apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namePrefix: monitoring-

# ðŸŒŠ Sync Wave 5: Loki Log Aggregation (After Storage)
commonAnnotations:
  argocd.argoproj.io/sync-wave: "5"

resources:
  - application.yaml           # âœ… Child Application for App-of-Apps pattern
  - promtail.yaml

helmCharts:
  - name: loki
    repo: https://grafana.github.io/helm-charts
    version: "6.10.0" # renovate: helm=grafana/loki
    releaseName: loki
    namespace: monitoring
    valuesFile: values.yaml