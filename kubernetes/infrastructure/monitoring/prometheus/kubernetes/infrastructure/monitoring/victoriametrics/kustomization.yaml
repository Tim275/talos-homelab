apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# ğŸš€ VictoriaMetrics - Drop-in Prometheus Replacement
# Better performance, less resource usage, same PromQL compatibility

commonAnnotations:
  argocd.argoproj.io/sync-wave: "3"  # After prometheus-operator-crds

resources:
  # ğŸ¯ OPERATOR DEPLOYMENT
  - application.yaml          # âœ… VictoriaMetrics Operator Helm chart (repo now allowed!)

  # ğŸ—ï¸ CLUSTER COMPONENTS
  - vmcluster.yaml            # VM Cluster (storage + select + insert)
  - vmagent.yaml              # VM Agent (scrapes ServiceMonitors)

  # ğŸ“Š GRAFANA INTEGRATION
  - grafana-datasource.yaml   # VictoriaMetrics as default datasource

# ğŸ›ï¸ COMMON LABELS
commonLabels:
  app.kubernetes.io/part-of: victoriametrics
  app.kubernetes.io/managed-by: argocd
