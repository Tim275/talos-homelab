# Drastically reduce Prometheus memory consumption
apiVersion: monitoring.coreos.com/v1
kind: Prometheus
metadata:
  name: prometheus-operator-kube-p-prometheus
  namespace: monitoring
spec:
  resources:
    requests:
      memory: "400Mi"  # Was probably 2Gi
      cpu: "100m"      # Was probably 500m
    limits:
      memory: "800Mi"  # Was probably 4Gi
      cpu: "250m"
  retention: 6h  # Reduce retention from 24h to 6h
  storageSpec:
    volumeClaimTemplate:
      spec:
        resources:
          requests:
            storage: 5Gi  # Reduce from 10Gi