apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Local CRDs without problematic annotations
resources:
- crd-alertmanagers.yaml
- crd-alertmanagerconfigs.yaml
- crd-prometheuses.yaml
- crd-prometheusagents.yaml
- crd-thanosrulers.yaml
- crd-scrapeconfigs.yaml
- crd-prometheusrules.yaml
- crd-servicemonitors.yaml

# Add only ArgoCD sync wave
commonAnnotations:
  argocd.argoproj.io/sync-wave: "0"

# Patches to enable ServerSideApply for large CRDs
patchesStrategicMerge:
- kustomization-patches.yaml