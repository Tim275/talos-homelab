apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# 🎯 VEGARN'S OPERATOR PATTERN - Only Operator with includeCRDs
commonAnnotations:
  argocd.argoproj.io/sync-wave: "4"  # Early wave - CRDs first

namespace: grafana

# 🏢 Enterprise Service Ownership
labels:
  - pairs:
      app.kubernetes.io/managed-by: argocd
      app.kubernetes.io/part-of: monitoring-stack
      app.kubernetes.io/component: grafana-operator
      team: platform
      service-tier: infrastructure

# 🎯 ONLY Grafana Operator - Microservices stay separate!
helmCharts:
  - name: grafana-operator
    repo: oci://ghcr.io/grafana/helm-charts
    version: v5.19.1
    releaseName: grafana-operator
    namespace: grafana
    includeCRDs: true  # 🎯 Vegarn's key insight - automatic CRD timing!
    valuesFile: values.yaml
