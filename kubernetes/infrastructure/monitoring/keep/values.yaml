# yamllint disable rule:line-length
# Keep AIOps Platform - Helm Values
# https://github.com/keephq/helm-charts

# ü§ñ Keep - Open Source AIOps & Alert Management
# AI-powered alert correlation, workflows, and automation
# "From 1000 alerts to 10 meaningful alerts"

# ========================================
# üåê GLOBAL INGRESS (DISABLED - using Gateway API)
# ========================================
global:
  ingress:
    enabled: false  # We use Gateway API HTTPRoute instead

# ========================================
# üîß BACKEND API CONFIGURATION
# ========================================
backend:
  enabled: true
  replicaCount: 1

  resources:
    requests:
      memory: "512Mi"
      cpu: "200m"
    limits:
      memory: "1Gi"
      cpu: "1000m"

  env:
    - name: AUTH_TYPE
      value: "NO_AUTH"  # Start with no auth
    - name: KEEP_API_URL
      value: "https://keep.timourhomelab.org/backend"
    - name: LOG_LEVEL
      value: "INFO"

# ========================================
# üé® FRONTEND CONFIGURATION
# ========================================
frontend:
  enabled: true
  replicaCount: 1

  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"

  env:
    - name: NEXT_PUBLIC_API_URL
      value: "https://keep.timourhomelab.org/backend"
    - name: AUTH_TYPE
      value: "NO_AUTH"  # Start with no auth
    - name: HOSTNAME
      value: "0.0.0.0"  # Listen on all interfaces for port-forward

# ========================================
# üîå WEBSOCKET SERVER (Soketi)
# ========================================
websocket:
  enabled: true
  replicaCount: 1

  resources:
    requests:
      memory: "128Mi"
      cpu: "50m"
    limits:
      memory: "256Mi"
      cpu: "200m"

# ========================================
# üíæ DATABASE CONFIGURATION (MySQL)
# ========================================
database:
  enabled: true
  type: mysql  # Using MySQL (default)

  pvc:
    enabled: true
    size: 10Gi
    storageClass: "rook-ceph-block-enterprise"
    retain: true

# ========================================
# üîê SERVICE ACCOUNTS
# ========================================
serviceAccount:
  create: true
  name: "keep"
  annotations: {}
