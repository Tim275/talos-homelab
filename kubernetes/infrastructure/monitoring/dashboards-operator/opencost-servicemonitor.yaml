# OpenCost ServiceMonitor - Cost Monitoring Platform
# Monitors OpenCost for Kubernetes cost analysis and tracking

# OpenCost Main ServiceMonitor
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: opencost-cost-analyzer
  namespace: opencost
  labels:
    app.kubernetes.io/name: opencost
    app.kubernetes.io/component: cost-analyzer
    release: prometheus-operator
spec:
  selector:
    matchLabels:
      app.kubernetes.io/name: opencost
  endpoints:
  - port: opencost-prometheus
    interval: 30s
    path: /metrics
    honorLabels: true
  namespaceSelector:
    matchNames:
    - opencost

---
# OpenCost UI ServiceMonitor
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: opencost-ui
  namespace: opencost
  labels:
    app.kubernetes.io/name: opencost-ui
    app.kubernetes.io/component: cost-ui
    release: prometheus-operator
spec:
  selector:
    matchLabels:
      app.kubernetes.io/name: opencost-ui
  endpoints:
  - port: http
    interval: 30s
    path: /healthz
    honorLabels: true
  namespaceSelector:
    matchNames:
    - opencost
