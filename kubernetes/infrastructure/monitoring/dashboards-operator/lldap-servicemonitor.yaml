# LLDAP ServiceMonitor - LDAP Directory Service Monitoring
# Monitors LLDAP lightweight LDAP directory service

apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: lldap-web
  namespace: lldap
  labels:
    app.kubernetes.io/name: lldap
    app.kubernetes.io/component: web-ui
    release: prometheus-operator
spec:
  selector:
    matchLabels:
      app.kubernetes.io/name: lldap
  endpoints:
  - port: http
    interval: 30s
    path: /health
    honorLabels: true
  - port: http
    interval: 30s
    path: /metrics
    honorLabels: true
  namespaceSelector:
    matchNames:
    - lldap

---
# LLDAP LDAP Protocol ServiceMonitor
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: lldap-ldap
  namespace: lldap
  labels:
    app.kubernetes.io/name: lldap
    app.kubernetes.io/component: ldap-protocol
    release: prometheus-operator
spec:
  selector:
    matchLabels:
      app.kubernetes.io/name: lldap
      app.kubernetes.io/component: ldap-protocol
  endpoints:
  - port: ldap
    interval: 30s
    honorLabels: true
  namespaceSelector:
    matchNames:
    - lldap
