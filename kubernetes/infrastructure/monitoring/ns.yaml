apiVersion: v1
kind: Namespace
metadata:
  name: monitoring
  labels:
    name: monitoring
    # CRITICAL FOR TALOS LINUX:
    # Node Exporter requires privileged access to collect metrics from Talos nodes
    # This includes:
    # - hostNetwork=true (access host network namespace)
    # - hostPID=true (access host process namespace)
    # - hostPath volumes (mount /proc, /sys, /root from host)
    # - hostPort (bind to port 9100 on host)
    #
    # Without privileged mode, Node Exporter cannot:
    # - Read CPU, memory, disk metrics from Talos VMs
    # - Access /proc/stat, /proc/meminfo, /proc/diskstats
    # - Monitor network interfaces and filesystems
    # - Export node-level metrics to Prometheus
    #
    # Talos Linux has strict security by default, making this even more important
    pod-security.kubernetes.io/enforce: privileged
    pod-security.kubernetes.io/audit: privileged
    pod-security.kubernetes.io/warn: privileged