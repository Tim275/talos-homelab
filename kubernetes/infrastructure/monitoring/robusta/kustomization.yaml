apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# üåä Sync Wave 5: Monitoring Components (AI Alert Enrichment)
commonAnnotations:
  argocd.argoproj.io/sync-wave: "5"

metadata:
  name: robusta
  namespace: monitoring

helmCharts:
  - name: robusta
    repo: https://robusta-charts.storage.googleapis.com
    version: 0.28.1  # Latest stable version (Oct 2025)
    releaseName: robusta
    namespace: monitoring
    valuesFile: values.yaml

resources:
  # üîê Sealed Secrets
  - slack-webhook-sealed-secret.yaml  # Slack webhook URL (legacy AlertManager)
  - slack-bot-token-sealed-secret.yaml  # Slack Bot Token for Robusta AI alerts

# ü§ñ HolmesGPT LLM Config Patch
patchesStrategicMerge:
  - holmesgpt-model-config.yaml  # Ollama with Phi-3 Medium
