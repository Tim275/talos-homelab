---
# Source: robusta/charts/holmes/templates/holmesgpt-service-account.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: robusta-holmes-service-account
  namespace: monitoring
---
# Source: robusta/templates/forwarder-service-account.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: robusta-forwarder-service-account
  namespace: monitoring
---
# Source: robusta/templates/runner-service-account.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: robusta-runner-service-account
  namespace: monitoring
---
# Source: robusta/templates/playbooks-config.yaml
apiVersion: v1
kind: Secret
metadata:
  name: robusta-playbooks-config-secret
  namespace: monitoring
type: Opaque
data:
  active_playbooks.yaml: |-
    cGxheWJvb2tfcmVwb3M6CiAge30Kc2lua3NfY29uZmlnOgotIHNsYWNrX3Npbms6CiAgICBhcGlfa2V5OiAne3sgZW52LlNMQUNLX1dFQkhPT0sgfX0nCiAgICBuYW1lOiBob21lbGFiX3NsYWNrCiAgICBzbGFja19jaGFubmVsOiAnI2hvbWVsYWItYWxlcnRzJwoKZ2xvYmFsX2NvbmZpZzoKICBjbHVzdGVyX25hbWU6IHRpbW91ci1ob21lbGFiLXRhbG9zCiAgYWNjb3VudF9pZDogIiIKICBhbGVydG1hbmFnZXJfdXJsOiBodHRwOi8va3ViZS1wcm9tZXRoZXVzLXN0YWNrLWFsZXJ0bWFuYWdlci5tb25pdG9yaW5nLnN2Yzo5MDkzCiAgY2hlY2tfcHJvbWV0aGV1c19mbGFnczogdHJ1ZQogIGN1c3RvbV9hbm5vdGF0aW9uczogW10KICBjdXN0b21fc2V2ZXJpdHlfbWFwOiB7fQogIGdyYWZhbmFfYXBpX2tleTogIiIKICBncmFmYW5hX2Rhc2hib2FyZF91aWQ6ICIiCiAgZ3JhZmFuYV91cmw6ICIiCiAgcHJvbWV0aGV1c191cmw6IGh0dHA6Ly9rdWJlLXByb21ldGhldXMtc3RhY2stcHJvbWV0aGV1cy5tb25pdG9yaW5nLnN2Yzo5MDkwCiAgc2lnbmluZ19rZXk6ICIiCgphbGVydF9yZWxhYmVsOgogIFtdCgpsaWdodF9hY3Rpb25zOgogIC0gcmVsYXRlZF9wb2RzCiAgLSBwcm9tZXRoZXVzX2VucmljaGVyCiAgLSBhZGRfc2lsZW5jZQogIC0gZGVsZXRlX3BvZAogIC0gZGVsZXRlX3NpbGVuY2UKICAtIGdldF9zaWxlbmNlcwogIC0gbG9nc19lbnJpY2hlcgogIC0gcG9kX2V2ZW50c19lbnJpY2hlcgogIC0gZGVwbG95bWVudF9ldmVudHNfZW5yaWNoZXIKICAtIGpvYl9ldmVudHNfZW5yaWNoZXIKICAtIGpvYl9wb2RfZW5yaWNoZXIKICAtIGdldF9yZXNvdXJjZV95YW1sCiAgLSBub2RlX2NwdV9lbnJpY2hlcgogIC0gbm9kZV9kaXNrX2FuYWx5emVyCiAgLSBub2RlX3J1bm5pbmdfcG9kc19lbnJpY2hlcgogIC0gbm9kZV9hbGxvY2F0YWJsZV9yZXNvdXJjZXNfZW5yaWNoZXIKICAtIG5vZGVfc3RhdHVzX2VucmljaGVyCiAgLSBub2RlX2dyYXBoX2VucmljaGVyCiAgLSBvb21raWxsZWRfY29udGFpbmVyX2dyYXBoX2VucmljaGVyCiAgLSBwb2Rfb29tX2tpbGxlcl9lbnJpY2hlcgogIC0gb29tX2tpbGxlcl9lbnJpY2hlcgogIC0gdm9sdW1lX2FuYWx5c2lzCiAgLSBweXRob25fcHJvZmlsZXIKICAtIHBvZF9wcwogIC0gcHl0aG9uX21lbW9yeQogIC0gZGVidWdnZXJfc3RhY2tfdHJhY2UKICAtIHB5dGhvbl9wcm9jZXNzX2luc3BlY3RvcgogIC0gcHJvbWV0aGV1c19hbGVydAogIC0gYWxlcnRtYW5hZ2VyX2FsZXJ0CiAgLSBjcmVhdGVfcHZjX3NuYXBzaG90CiAgLSByZXNvdXJjZV9ldmVudHNfZW5yaWNoZXIKICAtIGRlbGV0ZV9qb2IKICAtIGxpc3RfcmVzb3VyY2VfbmFtZXMKICAtIG5vZGVfZG1lc2dfZW5yaWNoZXIKICAtIHN0YXR1c19lbnJpY2hlcgogIC0ga3JyX3NjYW4KICAtIHBvcGV5ZV9zY2FuCiAgLSBoYW5kbGVfYWxlcnRtYW5hZ2VyX2V2ZW50CiAgLSBkcmFpbgogIC0gY29yZG9uCiAgLSB1bmNvcmRvbgogIC0gcm9sbG91dF9yZXN0YXJ0CiAgLSBhc2tfaG9sbWVzCiAgLSBwcm9tZXRoZXVzX2FsbF9hdmFpbGFibGVfbWV0cmljcwogIC0gcHJvbWV0aGV1c19nZXRfc2VyaWVzCiAgLSBwcm9tZXRoZXVzX2dldF9sYWJlbF9uYW1lcwogIC0gaG9sbWVzX3dvcmtsb2FkX2hlYWx0aAogIC0gaG9sbWVzX2NvbnZlcnNhdGlvbgogIC0gaG9sbWVzX2lzc3VlX2NoYXQKICAtIGhvbG1lc19jaGF0CiAgLSBob2xtZXNfd29ya2xvYWRfY2hhdAogIC0gbGlzdF9wb2RzCgphY3RpdmVfcGxheWJvb2tzOgogIC0gYWN0aW9uczoKICAgIC0gbmFtZV9zaWxlbmNlcjoKICAgICAgICBuYW1lczoKICAgICAgICAtIFdhdGNoZG9nCiAgICAgICAgLSBLdWJlU2NoZWR1bGVyRG93bgogICAgICAgIC0gS3ViZUNvbnRyb2xsZXJNYW5hZ2VyRG93bgogICAgICAgIC0gSW5mb0luaGliaXRvcgogICAgbmFtZTogQ29tbW9uUHJvbWV0aGV1c0FsZXJ0c1NpbGVuY2VyCiAgICB0cmlnZ2VyczoKICAgIC0gb25fcHJvbWV0aGV1c19hbGVydDoKICAgICAgICBzdGF0dXM6IGFsbAogIC0gYWN0aW9uczoKICAgIC0gbmFtZV9zaWxlbmNlcjoKICAgICAgICBuYW1lczoKICAgICAgICAtIGV0Y2RJbnN1ZmZpY2llbnRNZW1iZXJzCiAgICAgICAgLSBldGNkTWVtYmVyc0Rvd24KICAgICAgICAtIE5vZGVDbG9ja05vdFN5bmNocm9uaXNpbmcKICAgICAgICAtIFByb21ldGhldXNUU0RCQ29tcGFjdGlvbnNGYWlsaW5nCiAgICBuYW1lOiBNaW5pQ2x1c3RlcnNQcm9tZXRoZXVzQWxlcnRzU2lsZW5jZXIKICAgIHRyaWdnZXJzOgogICAgLSBvbl9wcm9tZXRoZXVzX2FsZXJ0OgogICAgICAgIGs4c19wcm92aWRlcnM6CiAgICAgICAgLSBNaW5pa3ViZQogICAgICAgIC0gS2luZAogICAgICAgIC0gUmFuY2hlckRlc2t0b3AKICAgICAgICBzdGF0dXM6IGFsbAogIC0gYWN0aW9uczoKICAgIC0gbmFtZV9zaWxlbmNlcjoKICAgICAgICBuYW1lczoKICAgICAgICAtIEt1YmVsZXREb3duCiAgICBuYW1lOiBHS0VQcm92aWRlckFsZXJ0c0FsZXJ0c1NpbGVuY2VyCiAgICB0cmlnZ2VyczoKICAgIC0gb25fcHJvbWV0aGV1c19hbGVydDoKICAgICAgICBrOHNfcHJvdmlkZXJzOgogICAgICAgIC0gR0tFCiAgICAgICAgc3RhdHVzOiBhbGwKICAtIGFjdGlvbnM6CiAgICAtIHNpbGVuY2VfYWxlcnQ6CiAgICAgICAgbG9nX3NpbGVuY2U6IHRydWUKICAgIG5hbWU6IERPTm9kZUFnZW50Q1BVVGhyb3R0bGluZ0hpZ2hBbGVydFNpbGVuY2VyCiAgICB0cmlnZ2VyczoKICAgIC0gb25fcHJvbWV0aGV1c19hbGVydDoKICAgICAgICBhbGVydF9uYW1lOiBDUFVUaHJvdHRsaW5nSGlnaAogICAgICAgIGs4c19wcm92aWRlcnM6CiAgICAgICAgLSBEaWdpdGFsT2NlYW4KICAgICAgICBwb2RfbmFtZV9wcmVmaXg6IGRvLW5vZGUtYWdlbnQKICAtIGFjdGlvbnM6CiAgICAtIHRhcmdldF9kb3duX2Ruc19zaWxlbmNlcjoge30KICAgIG5hbWU6IFRhcmdldERvd25TaWxlbmNlcgogICAgdHJpZ2dlcnM6CiAgICAtIG9uX3Byb21ldGhldXNfYWxlcnQ6CiAgICAgICAgYWxlcnRfbmFtZTogVGFyZ2V0RG93bgogIC0gYWN0aW9uczoKICAgIC0gcmVwb3J0X2NyYXNoX2xvb3A6IHt9CiAgICBuYW1lOiBDcmFzaExvb3BCYWNrT2ZmCiAgICB0cmlnZ2VyczoKICAgIC0gb25fcG9kX2NyYXNoX2xvb3A6CiAgICAgICAgcmVzdGFydF9yZWFzb246IENyYXNoTG9vcEJhY2tPZmYKICAtIGFjdGlvbnM6CiAgICAtIGltYWdlX3B1bGxfYmFja29mZl9yZXBvcnRlcjoge30KICAgIG5hbWU6IEltYWdlUHVsbEJhY2tPZmYKICAgIHRyaWdnZXJzOgogICAgLSBvbl9pbWFnZV9wdWxsX2JhY2tvZmY6IHt9CiAgLSBhY3Rpb25zOgogICAgLSBwb2RfZXZpY3RlZF9lbnJpY2hlcjoge30KICAgIC0gcG9kX2V2ZW50c19lbnJpY2hlcjoge30KICAgIC0gZW5yaWNoX3BvZF93aXRoX25vZGVfZXZlbnRzOiB7fQogICAgbmFtZTogUG9kRXZpY3RlZAogICAgdHJpZ2dlcnM6CiAgICAtIG9uX3BvZF9ldmljdGVkOiB7fQogIC0gYWN0aW9uczoKICAgIC0gZmFpbF9rcnJfc2Nhbjoge30KICAgIG5hbWU6IEtyckpvYkZhaWxlZAogICAgdHJpZ2dlcnM6CiAgICAtIG9uX2pvYl9mYWlsdXJlOgogICAgICAgIHNjb3BlOgogICAgICAgICAgaW5jbHVkZToKICAgICAgICAgIC0gbGFiZWxzOgogICAgICAgICAgICAtIGFwcD1rcnIucm9idXN0YS5kZXYKICAtIGFjdGlvbnM6CiAgICAtIHBvZF9vb21fa2lsbGVyX2VucmljaGVyOgogICAgICAgIGF0dGFjaF9sb2dzOiB0cnVlCiAgICAgICAgY29udGFpbmVyX21lbW9yeV9ncmFwaDogdHJ1ZQogICAgICAgIGRtZXNnX2xvZzogZmFsc2UKICAgICAgICBub2RlX21lbW9yeV9ncmFwaDogdHJ1ZQogICAgbmFtZTogUG9kT09NS2lsbAogICAgc3RvcDogdHJ1ZQogICAgdHJpZ2dlcnM6CiAgICAtIG9uX3BvZF9vb21fa2lsbGVkOgogICAgICAgIHJhdGVfbGltaXQ6IDM2MDAKICAtIGFjdGlvbnM6CiAgICAtIGxvZ3NfZW5yaWNoZXI6IHt9CiAgICAtIHBvZF9ldmVudHNfZW5yaWNoZXI6IHt9CiAgICBuYW1lOiBLdWJlUG9kQ3Jhc2hMb29waW5nCiAgICB0cmlnZ2VyczoKICAgIC0gb25fcHJvbWV0aGV1c19hbGVydDoKICAgICAgICBhbGVydF9uYW1lOiBLdWJlUG9kQ3Jhc2hMb29waW5nCiAgLSBhY3Rpb25zOgogICAgLSBwcm9tZXRoZXVzX3J1bGVzX2VucmljaGVyOiB7fQogICAgLSBsb2dzX2VucmljaGVyOgogICAgICAgIGZpbHRlcl9yZWdleDogLipFdmFsdWF0aW5nIHJ1bGUgZmFpbGVkLioKICAgIG5hbWU6IFByb21ldGhldXNSdWxlRmFpbHVyZXMKICAgIHRyaWdnZXJzOgogICAgLSBvbl9wcm9tZXRoZXVzX2FsZXJ0OgogICAgICAgIGFsZXJ0X25hbWU6IFByb21ldGhldXNSdWxlRmFpbHVyZXMKICAtIGFjdGlvbnM6CiAgICAtIGNwdV9vdmVyY29tbWl0ZWRfZW5yaWNoZXI6IHt9CiAgICAtIGV4dGVybmFsX3ZpZGVvX2VucmljaGVyOgogICAgICAgIG5hbWU6IENQVSBPdmVyY29tbWl0ZWQKICAgICAgICB1cmw6IGh0dHBzOi8vYml0Lmx5L292ZXJjb21taXQtY3B1CiAgICBuYW1lOiBLdWJlQ1BVT3ZlcmNvbW1pdAogICAgdHJpZ2dlcnM6CiAgICAtIG9uX3Byb21ldGhldXNfYWxlcnQ6CiAgICAgICAgYWxlcnRfbmFtZTogS3ViZUNQVU92ZXJjb21taXQKICAtIGFjdGlvbnM6CiAgICAtIG1lbW9yeV9vdmVyY29tbWl0ZWRfZW5yaWNoZXI6IHt9CiAgICAtIGV4dGVybmFsX3ZpZGVvX2VucmljaGVyOgogICAgICAgIG5hbWU6IE1lbW9yeSBPdmVyY29tbWl0ZWQKICAgICAgICB1cmw6IGh0dHBzOi8vYml0Lmx5L21lbW9yeS1vdmVyY29tbWl0CiAgICBuYW1lOiBLdWJlTWVtb3J5T3ZlcmNvbW1pdAogICAgdHJpZ2dlcnM6CiAgICAtIG9uX3Byb21ldGhldXNfYWxlcnQ6CiAgICAgICAgYWxlcnRfbmFtZTogS3ViZU1lbW9yeU92ZXJjb21taXQKICAtIGFjdGlvbnM6CiAgICAtIGxvZ3NfZW5yaWNoZXI6IHt9CiAgICAtIHBvZF9ldmVudHNfZW5yaWNoZXI6IHt9CiAgICAtIHBvZF9pc3N1ZV9pbnZlc3RpZ2F0b3I6IHt9CiAgICBuYW1lOiBLdWJlUG9kTm90UmVhZHkKICAgIHRyaWdnZXJzOgogICAgLSBvbl9wcm9tZXRoZXVzX2FsZXJ0OgogICAgICAgIGFsZXJ0X25hbWU6IEt1YmVQb2ROb3RSZWFkeQogIC0gYWN0aW9uczoKICAgIC0gcG9kX2lzc3VlX2ludmVzdGlnYXRvcjoge30KICAgIC0gcG9kX2V2ZW50c19lbnJpY2hlcjoge30KICAgIG5hbWU6IEt1YmVDb250YWluZXJXYWl0aW5nCiAgICB0cmlnZ2VyczoKICAgIC0gb25fcHJvbWV0aGV1c19hbGVydDoKICAgICAgICBhbGVydF9uYW1lOiBLdWJlQ29udGFpbmVyV2FpdGluZwogIC0gYWN0aW9uczoKICAgIC0gaHBhX21pc21hdGNoX2VucmljaGVyOiB7fQogICAgbmFtZTogS3ViZUhwYVJlcGxpY2FzTWlzbWF0Y2gKICAgIHRyaWdnZXJzOgogICAgLSBvbl9wcm9tZXRoZXVzX2FsZXJ0OgogICAgICAgIGFsZXJ0X25hbWU6IEt1YmVIcGFSZXBsaWNhc01pc21hdGNoCiAgLSBhY3Rpb25zOgogICAgLSBqb2JfaW5mb19lbnJpY2hlcjoge30KICAgIC0gam9iX2V2ZW50c19lbnJpY2hlcjoge30KICAgIC0gam9iX3BvZF9lbnJpY2hlcjoge30KICAgIG5hbWU6IEt1YmVKb2JBbGVydHMKICAgIHRyaWdnZXJzOgogICAgLSBvbl9wcm9tZXRoZXVzX2FsZXJ0OgogICAgICAgIGFsZXJ0X25hbWU6IEt1YmVKb2JGYWlsZWQKICAgIC0gb25fcHJvbWV0aGV1c19hbGVydDoKICAgICAgICBhbGVydF9uYW1lOiBLdWJlSm9iQ29tcGxldGlvbgogICAgLSBvbl9wcm9tZXRoZXVzX2FsZXJ0OgogICAgICAgIGFsZXJ0X25hbWU6IEt1YmVKb2JOb3RDb21wbGV0ZWQKICAtIGFjdGlvbnM6CiAgICAtIGFwaV9zZXJ2aWNlX3N0YXR1c19lbnJpY2hlcjoge30KICAgIG5hbWU6IEt1YmVBZ2dyZWdhdGVkQVBJRG93bgogICAgdHJpZ2dlcnM6CiAgICAtIG9uX3Byb21ldGhldXNfYWxlcnQ6CiAgICAgICAgYWxlcnRfbmFtZTogS3ViZUFnZ3JlZ2F0ZWRBUElEb3duCiAgLSBhY3Rpb25zOgogICAgLSBub2RlX3BvZHNfY2FwYWNpdHlfZW5yaWNoZXI6IHt9CiAgICAtIGFsZXJ0X2V4cGxhbmF0aW9uX2VucmljaGVyOgogICAgICAgIGFsZXJ0X2V4cGxhbmF0aW9uOiBUaGUgbm9kZSBpcyBhcHByb2FjaGluZyB0aGUgbWF4aW11bSBudW1iZXIgb2Ygc2NoZWR1bGVkIHBvZHMuCiAgICAgICAgcmVjb21tZW5kZWRfcmVzb2x1dGlvbjogVmVyaWZ5IHRoYXQgeW91IGRlZmluZWQgcHJvcGVyIHJlc291cmNlIHJlcXVlc3RzIGZvcgogICAgICAgICAgeW91ciB3b3JrbG9hZHMuIElmIHBvZHMgY2Fubm90IGJlIHNjaGVkdWxlZCwgYWRkIG1vcmUgbm9kZXMgdG8geW91ciBjbHVzdGVyLgogICAgbmFtZTogS3ViZWxldFRvb01hbnlQb2RzCiAgICB0cmlnZ2VyczoKICAgIC0gb25fcHJvbWV0aGV1c19hbGVydDoKICAgICAgICBhbGVydF9uYW1lOiBLdWJlbGV0VG9vTWFueVBvZHMKICAtIGFjdGlvbnM6CiAgICAtIG5vZGVfYWxsb2NhdGFibGVfcmVzb3VyY2VzX2VucmljaGVyOiB7fQogICAgLSBub2RlX3J1bm5pbmdfcG9kc19lbnJpY2hlcjoge30KICAgIC0gc3RhdHVzX2VucmljaGVyOgogICAgICAgIHNob3dfZGV0YWlsczogdHJ1ZQogICAgbmFtZTogS3ViZU5vZGVOb3RSZWFkeQogICAgdHJpZ2dlcnM6CiAgICAtIG9uX3Byb21ldGhldXNfYWxlcnQ6CiAgICAgICAgYWxlcnRfbmFtZTogS3ViZU5vZGVOb3RSZWFkeQogIC0gYWN0aW9uczoKICAgIC0gcmVzb3VyY2VfZXZlbnRzX2VucmljaGVyOiB7fQogICAgLSBub2RlX3N0YXR1c19lbnJpY2hlcjoge30KICAgIG5hbWU6IEt1YmVOb2RlVW5yZWFjaGFibGUKICAgIHRyaWdnZXJzOgogICAgLSBvbl9wcm9tZXRoZXVzX2FsZXJ0OgogICAgICAgIGFsZXJ0X25hbWU6IEt1YmVOb2RlVW5yZWFjaGFibGUKICAtIGFjdGlvbnM6CiAgICAtIHJlc291cmNlX2V2ZW50c19lbnJpY2hlcjoKICAgICAgICBkZXBlbmRlbnRfcG9kX21vZGU6IHRydWUKICAgIC0gc3RhdGVmdWxzZXRfcmVwbGljYXNfZW5yaWNoZXI6IHt9CiAgICAtIHBvZF9pc3N1ZV9pbnZlc3RpZ2F0b3I6IHt9CiAgICBuYW1lOiBLdWJlU3RhdGVmdWxTZXRSZXBsaWNhc01pc21hdGNoCiAgICB0cmlnZ2VyczoKICAgIC0gb25fcHJvbWV0aGV1c19hbGVydDoKICAgICAgICBhbGVydF9uYW1lOiBLdWJlU3RhdGVmdWxTZXRSZXBsaWNhc01pc21hdGNoCiAgLSBhY3Rpb25zOgogICAgLSByZWxhdGVkX3BvZHM6IHt9CiAgICAtIHN0YXRlZnVsc2V0X3JlcGxpY2FzX2VucmljaGVyOiB7fQogICAgbmFtZTogS3ViZVN0YXRlZnVsU2V0VXBkYXRlTm90Um9sbGVkT3V0CiAgICB0cmlnZ2VyczoKICAgIC0gb25fcHJvbWV0aGV1c19hbGVydDoKICAgICAgICBhbGVydF9uYW1lOiBLdWJlU3RhdGVmdWxTZXRVcGRhdGVOb3RSb2xsZWRPdXQKICAtIGFjdGlvbnM6CiAgICAtIHJlc291cmNlX2V2ZW50c19lbnJpY2hlcjoge30KICAgIC0gcmVsYXRlZF9wb2RzOiB7fQogICAgLSBkYWVtb25zZXRfc3RhdHVzX2VucmljaGVyOiB7fQogICAgbmFtZTogS3ViZURhZW1vblNldFJvbGxvdXRTdHVjawogICAgdHJpZ2dlcnM6CiAgICAtIG9uX3Byb21ldGhldXNfYWxlcnQ6CiAgICAgICAgYWxlcnRfbmFtZTogS3ViZURhZW1vblNldFJvbGxvdXRTdHVjawogIC0gYWN0aW9uczoKICAgIC0gZGFlbW9uc2V0X3N0YXR1c19lbnJpY2hlcjoge30KICAgIC0gZGFlbW9uc2V0X21pc3NjaGVkdWxlZF9hbmFseXNpc19lbnJpY2hlcjoge30KICAgIG5hbWU6IEs4c01pc3NjaGVkdWxlZAogICAgdHJpZ2dlcnM6CiAgICAtIG9uX3Byb21ldGhldXNfYWxlcnQ6CiAgICAgICAgYWxlcnRfbmFtZTogS3ViZXJuZXRlc0RhZW1vbnNldE1pc3NjaGVkdWxlZAogICAgLSBvbl9wcm9tZXRoZXVzX2FsZXJ0OgogICAgICAgIGFsZXJ0X25hbWU6IEt1YmVEYWVtb25TZXRNaXNTY2hlZHVsZWQKICAtIGFjdGlvbnM6CiAgICAtIG5vZGVfY3B1X2VucmljaGVyOiB7fQogICAgLSBhbGVydF9ncmFwaF9lbnJpY2hlcjoKICAgICAgICBpdGVtX3R5cGU6IE5vZGUKICAgICAgICByZXNvdXJjZV90eXBlOiBDUFUKICAgIG5hbWU6IEhvc3RIaWdoQ3B1TG9hZAogICAgdHJpZ2dlcnM6CiAgICAtIG9uX3Byb21ldGhldXNfYWxlcnQ6CiAgICAgICAgYWxlcnRfbmFtZTogSG9zdEhpZ2hDcHVMb2FkCiAgLSBhY3Rpb25zOgogICAgLSBvb21fa2lsbGVyX2VucmljaGVyOiB7fQogICAgLSBhbGVydF9ncmFwaF9lbnJpY2hlcjoKICAgICAgICBpdGVtX3R5cGU6IE5vZGUKICAgICAgICByZXNvdXJjZV90eXBlOiBNZW1vcnkKICAgIG5hbWU6IEhvc3RPb21LaWxsRGV0ZWN0ZWQKICAgIHRyaWdnZXJzOgogICAgLSBvbl9wcm9tZXRoZXVzX2FsZXJ0OgogICAgICAgIGFsZXJ0X25hbWU6IEhvc3RPb21LaWxsRGV0ZWN0ZWQKICAtIGFjdGlvbnM6CiAgICAtIG5vZGVfZGlza19hbmFseXplcjoge30KICAgIC0gYWxlcnRfZ3JhcGhfZW5yaWNoZXI6CiAgICAgICAgaXRlbV90eXBlOiBOb2RlCiAgICAgICAgcmVzb3VyY2VfdHlwZTogRGlzawogICAgbmFtZTogTm9kZUZTU3BhY2VBbGVydHMKICAgIHRyaWdnZXJzOgogICAgLSBvbl9wcm9tZXRoZXVzX2FsZXJ0OgogICAgICAgIGFsZXJ0X25hbWU6IE5vZGVGaWxlc3lzdGVtU3BhY2VGaWxsaW5nVXAKICAgIC0gb25fcHJvbWV0aGV1c19hbGVydDoKICAgICAgICBhbGVydF9uYW1lOiBOb2RlRmlsZXN5c3RlbUFsbW9zdE91dE9mU3BhY2UKICAtIGFjdGlvbnM6CiAgICAtIGNwdV90aHJvdHRsaW5nX2FuYWx5c2lzX2VucmljaGVyOiB7fQogICAgLSBhbGVydF9ncmFwaF9lbnJpY2hlcjoKICAgICAgICBpdGVtX3R5cGU6IFBvZAogICAgICAgIHJlc291cmNlX3R5cGU6IENQVQogICAgbmFtZTogQ1BVVGhyb3R0bGluZ0hpZ2gKICAgIHRyaWdnZXJzOgogICAgLSBvbl9wcm9tZXRoZXVzX2FsZXJ0OgogICAgICAgIGFsZXJ0X25hbWU6IENQVVRocm90dGxpbmdIaWdoCiAgICAgICAgc3RhdHVzOiBhbGwKICAtIGFjdGlvbnM6CiAgICAtIHBvZF9pc3N1ZV9pbnZlc3RpZ2F0b3I6IHt9CiAgICAtIGRlcGxveW1lbnRfZXZlbnRzX2VucmljaGVyOgogICAgICAgIGluY2x1ZGVkX3R5cGVzOgogICAgICAgIC0gV2FybmluZwogICAgLSBkZXBsb3ltZW50X2V2ZW50c19lbnJpY2hlcjoKICAgICAgICBkZXBlbmRlbnRfcG9kX21vZGU6IHRydWUKICAgICAgICBpbmNsdWRlZF90eXBlczoKICAgICAgICAtIFdhcm5pbmcKICAgICAgICAtIE5vcm1hbAogICAgbmFtZTogRGVwbG95bWVudFJlcGxpY2FzTWlzbWF0Y2gKICAgIHRyaWdnZXJzOgogICAgLSBvbl9wcm9tZXRoZXVzX2FsZXJ0OgogICAgICAgIGFsZXJ0X25hbWU6IEt1YmVybmV0ZXNEZXBsb3ltZW50UmVwbGljYXNNaXNtYXRjaAogICAgLSBvbl9wcm9tZXRoZXVzX2FsZXJ0OgogICAgICAgIGFsZXJ0X25hbWU6IEt1YmVEZXBsb3ltZW50UmVwbGljYXNNaXNtYXRjaAogIC0gYWN0aW9uczoKICAgIC0gdmVyc2lvbl9taXNtYXRjaF9lbnJpY2hlcjoge30KICAgIG5hbWU6IEt1YmVWZXJzaW9uTWlzbWF0Y2gKICAgIHRyaWdnZXJzOgogICAgLSBvbl9wcm9tZXRoZXVzX2FsZXJ0OgogICAgICAgIGFsZXJ0X25hbWU6IEt1YmVWZXJzaW9uTWlzbWF0Y2gKICAtIGFjdGlvbnM6CiAgICAtIGRlZmF1bHRfZW5yaWNoZXI6IHt9CiAgICBuYW1lOiBEZWZhdWx0UHJvbWV0aGV1c0FsZXJ0RW5yaWNoZXIKICAgIHRyaWdnZXJzOgogICAgLSBvbl9wcm9tZXRoZXVzX2FsZXJ0OgogICAgICAgIHN0YXR1czogYWxsCiAgLSBhY3Rpb25zOgogICAgLSBhbGVydF9leHBsYW5hdGlvbl9lbnJpY2hlcjoKICAgICAgICBhbGVydF9leHBsYW5hdGlvbjogVGhpcyBhbGVydCBpcyBmaXJlZCB3aGVuIHRoZSBmaWxlIHN5c3RlbSBpcyBydW5uaW5nIG91dCBvZgogICAgICAgICAgc3BhY2UuCiAgICAgICAgcmVjb21tZW5kZWRfcmVzb2x1dGlvbjogVGhpcyBpcyBhIGNvbW1vbiBpc3N1ZSBvbiBsb2NhbCBjbHVzdGVycyBhbmQgd2UgcmVjb21tZW5kCiAgICAgICAgICBpbmNyZWFzaW5nIHRoZSBub2RlIGRpc2sgc2l6ZSBmb3IgeW91ciBjbHVzdGVyIHRvIHJ1biBvcHRpbWFsbHkuCiAgICBuYW1lOiBNaW5pQ2x1c3Rlck5vZGVGU1NwYWNlQWxlcnRzCiAgICB0cmlnZ2VyczoKICAgIC0gb25fcHJvbWV0aGV1c19hbGVydDoKICAgICAgICBhbGVydF9uYW1lOiBOb2RlRmlsZXN5c3RlbVNwYWNlRmlsbGluZ1VwCiAgICAgICAgazhzX3Byb3ZpZGVyczoKICAgICAgICAtIE1pbmlrdWJlCiAgICAgICAgLSBLaW5kCiAgICAgICAgLSBSYW5jaGVyRGVza3RvcAogICAgLSBvbl9wcm9tZXRoZXVzX2FsZXJ0OgogICAgICAgIGFsZXJ0X25hbWU6IE5vZGVGaWxlc3lzdGVtQWxtb3N0T3V0T2ZTcGFjZQogICAgICAgIGs4c19wcm92aWRlcnM6CiAgICAgICAgLSBNaW5pa3ViZQogICAgICAgIC0gS2luZAogICAgICAgIC0gUmFuY2hlckRlc2t0b3AKICAtIGFjdGlvbnM6CiAgICAtIHdhcm5pbmdfZXZlbnRzX3JlcG9ydDoKICAgICAgICB3YXJuaW5nX2V2ZW50X2dyb3VwczoKICAgICAgICAtIGFnZ3JlZ2F0aW9uX2tleTogUG9kTGlmZWN5Y2xlV2FybmluZwogICAgICAgICAgbWF0Y2hlcnM6CiAgICAgICAgICAtIEZhaWxlZENyZWF0ZVBvZFNhbmRCb3gKICAgICAgICAgIC0gRmFpbGVkVG9SZXRyaWV2ZUltYWdlUHVsbFNlY3JldAogICAgICAgICAgLSBCYWNrT2ZmCiAgICAgICAgICAtIEZhaWxlZERhZW1vblBvZAogICAgICAgICAgLSBGYWlsZWRLaWxsUG9kCiAgICAgICAgICAtIEZhaWxlZFByZVN0b3BIb29rCiAgICAgICAgICAtIEV4Y2VlZGVkR3JhY2VQZXJpb2QKICAgICAgICAgIC0gRXZpY3RlZAogICAgICAgIC0gYWdncmVnYXRpb25fa2V5OiBOb2RlSGVhbHRoV2FybmluZwogICAgICAgICAgbWF0Y2hlcnM6CiAgICAgICAgICAtIEludmFsaWREaXNrQ2FwYWNpdHkKICAgICAgICAgIC0gTm9kZU5vdFJlYWR5CiAgICAgICAgICAtIE5vZGVSZWdpc3RyYXRpb25DaGVja2VyU3RhcnQKICAgICAgICAgIC0gV29ya2Zsb3dOb2RlRmFpbGVkCiAgICAgICAgICAtIE9PTUtpbGxpbmcKICAgICAgICAgIC0gRmFpbGVkRHJhaW5pbmcKICAgICAgICAgIC0gUHJlZW1wdFNjaGVkdWxlZAogICAgICAgICAgLSBOb2RlUmVnaXN0cmF0aW9uQ2hlY2tlckRpZE5vdFJ1bkNoZWNrcwogICAgICAgICAgLSBOb2RlU2h1dGRvd24KICAgICAgICAgIC0gVGVybWluYXRlU2NoZWR1bGVkCiAgICAgICAgICAtIEZyZWVEaXNrU3BhY2VGYWlsZWQKICAgICAgICAgIC0gTm9kZVN5c2N0bENoYW5nZQogICAgICAgICAgLSBTeXN0ZW1PT00KICAgICAgICAgIC0gTm9kZVN0YXJ0dXBGYWlsZWQKICAgICAgICAgIC0gRHJhaW4KICAgICAgICAgIC0gU2NhbGVVcEZhaWxlZAogICAgICAgICAgLSBTY2FsZURvd25GYWlsZWQKICAgICAgICAtIGFnZ3JlZ2F0aW9uX2tleTogUHJvYmVGYWlsdXJlCiAgICAgICAgICBtYXRjaGVyczoKICAgICAgICAgIC0gVW5oZWFsdGh5CiAgICAgICAgICAtIFByb2JlRXJyb3IKICAgICAgICAgIC0gUHJvYmVXYXJuaW5nCiAgICAgICAgLSBhZ2dyZWdhdGlvbl9rZXk6IFBvbGljeVZpb2xhdGlvbgogICAgICAgICAgbWF0Y2hlcnM6CiAgICAgICAgICAtIFBvbGljeVZpb2xhdGlvbgogICAgICAgIC0gYWdncmVnYXRpb25fa2V5OiBTY2FsZVdhcm5pbmcKICAgICAgICAgIG1hdGNoZXJzOgogICAgICAgICAgLSBGYWlsZWRHZXRSZXNvdXJjZU1ldHJpYwogICAgICAgICAgLSBGYWlsZWRDb21wdXRlTWV0cmljc1JlcGxpY2FzCiAgICAgICAgICAtIEtFREFTY2FsZXJGYWlsZWQKICAgICAgICAgIC0gRmFpbGVkR2V0Q29udGFpbmVyUmVzb3VyY2VNZXRyaWMKICAgICAgICAgIC0gRmFpbGVkR2V0RXh0ZXJuYWxNZXRyaWMKICAgICAgICAgIC0gU2NhbGVkT2JqZWN0Q2hlY2tGYWlsZWQKICAgICAgICAgIC0gRmFpbGVkR2V0T2JqZWN0TWV0cmljCiAgICAgICAgLSBhZ2dyZWdhdGlvbl9rZXk6IFNjaGVkdWxpbmdXYXJuaW5nCiAgICAgICAgICBtYXRjaGVyczoKICAgICAgICAgIC0gRmFpbGVkU2NoZWR1bGluZwogICAgICAgIC0gYWdncmVnYXRpb25fa2V5OiBWb2x1bWVXYXJuaW5nCiAgICAgICAgICBtYXRjaGVyczoKICAgICAgICAgIC0gRmFpbGVkTW91bnQKICAgICAgICAgIC0gRmFpbGVkQXR0YWNoVm9sdW1lCiAgICAgICAgICAtIFZvbHVtZUZhaWxlZERlbGV0ZQogICAgLSBldmVudF9yZXNvdXJjZV9ldmVudHM6IHt9CiAgICBuYW1lOiBLOHNXYXJuaW5nRXZlbnRzUmVwb3J0CiAgICBzaW5rczoKICAgIC0gcm9idXN0YV91aV9zaW5rCiAgICB0cmlnZ2VyczoKICAgIC0gb25fa3ViZXJuZXRlc193YXJuaW5nX2V2ZW50X2NyZWF0ZToKICAgICAgICBleGNsdWRlOgogICAgICAgIC0gTm9kZVN5c2N0bENoYW5nZQogIC0gYWN0aW9uczoKICAgIC0gcmVzb3VyY2VfYmFieXNpdHRlcjoge30KICAgIG5hbWU6IEs4c0NoYW5nZVRyYWNraW5nCiAgICBzaW5rczoKICAgIC0gcm9idXN0YV91aV9zaW5rCiAgICB0cmlnZ2VyczoKICAgIC0gb25fa3ViZXJuZXRlc19yZXNvdXJjZV9vcGVyYXRpb246CiAgICAgICAgcmVzb3VyY2VzOgogICAgICAgIC0gZGVwbG95bWVudAogICAgICAgIC0gZGFlbW9uc2V0CiAgICAgICAgLSBzdGF0ZWZ1bHNldAogIC0gYWN0aW9uczoKICAgIC0gcmVzb3VyY2VfYmFieXNpdHRlcjoge30KICAgIC0gY3VzdG9taXNlX2ZpbmRpbmc6CiAgICAgICAgYWdncmVnYXRpb25fa2V5OiBJbmdyZXNzQ2hhbmdlCiAgICBuYW1lOiBJbmdyZXNzQ2hhbmdlVHJhY2tpbmcKICAgIHNpbmtzOgogICAgLSByb2J1c3RhX3VpX3NpbmsKICAgIHRyaWdnZXJzOgogICAgLSBvbl9rdWJlcm5ldGVzX3Jlc291cmNlX29wZXJhdGlvbjoKICAgICAgICByZXNvdXJjZXM6CiAgICAgICAgLSBpbmdyZXNzCiAgLSBhY3Rpb25zOgogICAgLSByZXNvdXJjZV9ldmVudHNfZGlmZjoge30KICAgIG5hbWU6IEV2ZW50QmFzZWRDaGFuZ2VUcmFja2luZwogICAgdHJpZ2dlcnM6CiAgICAtIG9uX2t1YmVybmV0ZXNfcmVzb3VyY2Vfb3BlcmF0aW9uOgogICAgICAgIHJlc291cmNlczoKICAgICAgICAtIGRlcGxveW1lbnQKICAgICAgICAtIHJlcGxpY2FzZXQKICAgICAgICAtIGRhZW1vbnNldAogICAgICAgIC0gc3RhdGVmdWxzZXQKICAgICAgICAtIHBvZAogICAgICAgIC0gbm9kZQogICAgICAgIC0gam9iCiAgLSBhY3Rpb25zOgogICAgLSBjcmVhdGVfZmluZGluZzoKICAgICAgICBhZ2dyZWdhdGlvbl9rZXk6IEpvYkZhaWx1cmUKICAgICAgICB0aXRsZTogSm9iICRuYW1lIG9uIG5hbWVzcGFjZSAkbmFtZXNwYWNlIGZhaWxlZAogICAgLSBqb2JfaW5mb19lbnJpY2hlcjoge30KICAgIC0gam9iX2V2ZW50c19lbnJpY2hlcjoge30KICAgIC0gam9iX3BvZF9lbnJpY2hlcjoge30KICAgIG5hbWU6IEs4c0pvYkZhaWx1cmUKICAgIHNpbmtzOgogICAgLSByb2J1c3RhX3VpX3NpbmsKICAgIHRyaWdnZXJzOgogICAgLSBvbl9qb2JfZmFpbHVyZToge30KICAtIGFjdGlvbnM6CiAgICAtIGtycl9zY2FuOiB7fQogICAgbmFtZTogV2Vla2x5S1JSU2NhbgogICAgc2lua3M6CiAgICAtIHJvYnVzdGFfdWlfc2luawogICAgdHJpZ2dlcnM6CiAgICAtIG9uX3NjaGVkdWxlOgogICAgICAgIGNyb25fc2NoZWR1bGVfcmVwZWF0OgogICAgICAgICAgY3Jvbl9leHByZXNzaW9uOiAwIDEyICogKiAxCiAgLSBhY3Rpb25zOgogICAgLSBjbGVhbnVwX3JvYnVzdGFfcG9kczoKICAgICAgICBob3Vyc19iYWNrOiA2CiAgICBuYW1lOiBSb2J1c3RhTWFpbnRlbmFuY2UKICAgIHNpbmtzOgogICAgLSByb2J1c3RhX3VpX3NpbmsKICAgIHRyaWdnZXJzOgogICAgLSBvbl9zY2hlZHVsZToKICAgICAgICBjcm9uX3NjaGVkdWxlX3JlcGVhdDoKICAgICAgICAgIGNyb25fZXhwcmVzc2lvbjogMCAqLzMgKiAqICoK
---
# Source: robusta/templates/runner.yaml
apiVersion: v1
kind: Secret
metadata:
  name: robusta-runner-secret
  namespace: monitoring
type: Opaque
stringData:
  SENTRY_DSN: https://4f1a66f025c60830fec303a094dcdf94@o1120648.ingest.sentry.io/6156573
---
# Source: robusta/charts/holmes/templates/toolset-config.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: custom-toolsets-configmap
  namespace: monitoring
data:
  custom_toolset.yaml: |-
    toolsets: 
      internet:
        enabled: true
      kubernetes/core:
        enabled: true
      kubernetes/logs:
        enabled: true
      prometheus/metrics:
        enabled: true
      robusta:
        enabled: true
    mcp_servers: 
      {}
  model_list.yaml: |-
    
    {}
---
# Source: robusta/templates/kubewatch-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: robusta-kubewatch-config
  namespace: monitoring
data:
  .kubewatch.yaml: |-
    handler:
      cloudevent:
        url: "http://robusta-runner:80/api/handle"
    namespace: ""
    resource:
      clusterrole: true
      clusterrolebinding: true
      configmap: true
      coreevent: false
      daemonset: true
      deployment: true
      event: true
      hpa: true
      ingress: true
      job: true
      namespace: true
      node: true
      persistentvolume: true
      pod: true
      replicaset: true
      replicationcontroller: false
      secret: false
      serviceaccount: true
      services: true
      statefulset: true
---
# Source: robusta/charts/holmes/templates/holmesgpt-service-account.yaml
kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: robusta-holmes-cluster-role
  namespace : monitoring
rules:
  - apiGroups:
      - "storage.k8s.io"
    resources:
      - storageclasses
    verbs:
      - list
      - get
      - watch
  - apiGroups:
      - "metrics.k8s.io"
    resources:
      - pods
      - nodes
    verbs:
      - get
      - list
  - apiGroups:
      - ""
    resources:
      - configmaps
      - daemonsets
      - deployments
      - events
      - namespaces
      - persistentvolumes
      - persistentvolumeclaims
      - pods
      - pods/status
      - pods/log
      - replicasets
      - replicationcontrollers
      - services
      - serviceaccounts
      - endpoints
    verbs:
      - get
      - list
      - watch

  - apiGroups:
      - ""
    resources:
      - nodes
    verbs:
      - get
      - list
      - watch

  - apiGroups:
      - "apiregistration.k8s.io"
    resources:
      - apiservices
    verbs:
      - get
      - list

  - apiGroups:
      - "rbac.authorization.k8s.io"
    resources:
      - clusterroles
      - clusterrolebindings
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - "autoscaling"
    resources:
      - horizontalpodautoscalers
    verbs:
      - get
      - list
      - watch

  - apiGroups:
      - apps
    resources:
      - daemonsets
      - deployments
      - deployments/scale
      - replicasets
      - replicasets/scale
      - statefulsets
    verbs:
      - get
      - list
      - watch

  - apiGroups:
      - extensions
    resources:
      - daemonsets
      - deployments
      - deployments/scale
      - ingresses
      - replicasets
      - replicasets/scale
      - replicationcontrollers/scale
    verbs:
      - get
      - list
      - watch

  - apiGroups:
      - batch
    resources:
      - cronjobs
      - jobs
    verbs:
      - get
      - list
      - watch

  - apiGroups:
      - "events.k8s.io"
    resources:
      - events
    verbs:
      - get
      - list

  - apiGroups:
      - networking.k8s.io
    resources:
    - ingresses
    - networkpolicies
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - autoscaling
    resources:
    - horizontalpodautoscalers
    verbs:
      - get
      - list
  - apiGroups:
      - "policy"
    resources:
    - poddisruptionbudgets
    - podsecuritypolicies
    verbs:
      - get
      - list
  - apiGroups:
      - rbac.authorization.k8s.io
    resources:
    - clusterroles
    - clusterrolebindings
    - roles
    - rolebindings
    verbs:
      - get
      - list
   # Prometheus CRDs
  - apiGroups:
      - monitoring.coreos.com
    resources:
      - alertmanagers
      - alertmanagers/finalizers
      - alertmanagers/status
      - alertmanagerconfigs
      - prometheuses
      - prometheuses/finalizers
      - prometheuses/status
      - prometheusagents
      - prometheusagents/finalizers
      - prometheusagents/status
      - thanosrulers
      - thanosrulers/finalizers
      - thanosrulers/status
      - scrapeconfigs
      - servicemonitors
      - podmonitors
      - probes
      - prometheusrules
    verbs:
      - get
      - list
      - watch
---
# Source: robusta/templates/forwarder-service-account.yaml
kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: robusta-forwarder-cluster-role
  namespace : monitoring
rules:
  - apiGroups:
      - ""
    resources:
      - configmaps
      - daemonsets
      - deployments
      - events
      - namespaces
      - nodes
      - persistentvolumes
      - pods
      - replicasets
      - replicationcontrollers
      #- secrets
      - services
      - serviceaccounts
    verbs:
      - get
      - list
      - watch

  - apiGroups:
      - "networking.k8s.io"
    resources:
      - ingresses
    verbs:
      - get
      - list
      - watch

  - apiGroups:
      - "autoscaling"
    resources:
      - horizontalpodautoscalers
    verbs:
      - get
      - list
      - watch

  - apiGroups:
      - "events.k8s.io"
    resources:
      - events
    verbs:
      - get
      - list
      - watch

  - apiGroups:
      - "rbac.authorization.k8s.io"
    resources:
      - clusterroles
      - clusterrolebindings
    verbs:
      - get
      - list
      - watch

  - apiGroups:
      - apps
    resources:
      - daemonsets
      - deployments
      - deployments/scale
      - replicasets
      - replicasets/scale
      - statefulsets
    verbs:
      - get
      - list
      - watch

  - apiGroups:
      - extensions
    resources:
      - daemonsets
      - deployments
      - deployments/scale
      - ingresses
      - replicasets
      - replicasets/scale
      - replicationcontrollers/scale
    verbs:
      - get
      - list
      - watch
    
  - apiGroups:
      - batch
    resources:
      - cronjobs
      - jobs
    verbs:
      - get
      - list
      - watch
---
# Source: robusta/templates/runner-service-account.yaml
kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: robusta-runner-cluster-role
  namespace : monitoring
rules:
  - apiGroups:
      - ""
    resources:
      - configmaps
      - daemonsets
      - deployments
      - events
      - namespaces
      - persistentvolumes
      - persistentvolumeclaims
      - pods
      - pods/status
      - pods/exec
      - pods/log
      - replicasets
      - replicationcontrollers
      - services
      - serviceaccounts
      - endpoints
      - secrets
      
    verbs:
      - get
      - list
      - watch

  - apiGroups:
      - ""
    resources:
      - nodes
    verbs:
      - get
      - list
      - watch
      - patch

  - apiGroups:
      - ""
    resources:
      - configmaps
      - persistentvolumes
      - persistentvolumeclaims
      - pods
      - pods/status
      - pods/exec
      - pods/log
      - pods/eviction
    verbs:
      - delete
      - create
      - patch
      - update

  - apiGroups:
      - ""
    resources:
      - secrets
    verbs:
      - create

  - apiGroups:
      - "apiregistration.k8s.io"
    resources:
      - apiservices
    verbs:
      - get
      - list

  - apiGroups:
      - "rbac.authorization.k8s.io"
    resources:
      - clusterroles
      - clusterrolebindings
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - "autoscaling"
    resources:
      - horizontalpodautoscalers
    verbs:
      - get
      - list
      - watch
      - patch
      - update

  - apiGroups:
      - apps
    resources:
      - daemonsets
      - deployments
      - deployments/scale
      - replicasets
      - replicasets/scale
      - statefulsets
    verbs:
      - get
      - list
      - watch

  - apiGroups:
      - apps
    resources:
      - deployments
    verbs:
      - create
      - patch
      - delete

  - apiGroups:
      - apps
    resources:
      - daemonsets
      - statefulsets
    verbs:
      - patch

  - apiGroups:
      - extensions
    resources:
      - daemonsets
      - deployments
      - deployments/scale
      - ingresses
      - replicasets
      - replicasets/scale
      - replicationcontrollers/scale
    verbs:
      - get
      - list
      - watch

  - apiGroups:
      - batch
    resources:
      - cronjobs
      - jobs
    verbs:
      - get
      - list
      - watch
      - patch
      - delete
      - create

  - apiGroups:
      - "events.k8s.io"
    resources:
      - events
    verbs:
      - get
      - list

  - apiGroups:
      - networking.k8s.io
    resources:
    - ingresses
    - networkpolicies
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - autoscaling
    resources:
    - horizontalpodautoscalers
    verbs:
      - get
      - list
  - apiGroups:
      - "policy"
    resources:
    - poddisruptionbudgets
    - podsecuritypolicies
    verbs:
      - get
      - list
  - apiGroups:
      - rbac.authorization.k8s.io
    resources:
    - clusterroles
    - clusterrolebindings
    - roles
    - rolebindings
    verbs:
      - get
      - list
---
# Source: robusta/charts/holmes/templates/holmesgpt-service-account.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: robusta-holmes-cluster-role-binding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: robusta-holmes-cluster-role
subjects:
  - kind: ServiceAccount
    name: robusta-holmes-service-account
    namespace: monitoring
---
# Source: robusta/templates/forwarder-service-account.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: robusta-forwarder-cluster-role-binding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: robusta-forwarder-cluster-role
subjects:
  - kind: ServiceAccount
    name: robusta-forwarder-service-account
    namespace: monitoring
---
# Source: robusta/templates/runner-service-account.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: robusta-runner-cluster-role-binding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: robusta-runner-cluster-role
subjects:
  - kind: ServiceAccount
    name: robusta-runner-service-account
    namespace: monitoring
---
# Source: robusta/charts/holmes/templates/holmes.yaml
apiVersion: v1
kind: Service
metadata:
  name: robusta-holmes
  namespace: monitoring
  labels:
    app: holmes
spec:
  selector:
    app: holmes
  ports:
    - name: http
      protocol: TCP
      port: 80
      targetPort: 5050
---
# Source: robusta/templates/forwarder.yaml
apiVersion: v1
kind: Service
metadata:
  name: robusta-forwarder
  namespace: monitoring
  labels:
    app: robusta-forwarder
spec:
  selector:
    app: robusta-forwarder
  ports:
    - name: forwarder-metrics
      protocol: TCP
      port: 80
      targetPort: 2112
---
# Source: robusta/templates/runner.yaml
apiVersion: v1
kind: Service
metadata:
  name: robusta-runner
  namespace: monitoring
  labels:
    app: robusta-runner
    target: robusta-runner
spec:
  selector:
    app: robusta-runner
  ports:
    - name: http
      protocol: TCP
      port: 80
      targetPort: 5000
---
# Source: robusta/charts/holmes/templates/holmes.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: robusta-holmes
  namespace: monitoring
  labels:
    app: holmes
spec:
  replicas: 1
  revisionHistoryLimit: 10
  selector:
    matchLabels:
      app: holmes
  template:
    metadata:
      labels:
        app: holmes
      annotations:
        # checksum annotation triggering pod reload when .Values.toolsets changes by helm upgrade
        checksum/toolset-config: 060a20b330e0bf168372da8663876175c6c04457fa71e341212351d1b97bd703
    spec:
      serviceAccountName: robusta-holmes-service-account
      containers:
      - name: holmes
        image: "robustadev/holmes:0.14.2"
        imagePullPolicy: Always
        command: ["python3", "-u", "server.py"]
        env:
          - name: LOG_LEVEL
            value: INFO
          - name: ENABLE_TELEMETRY
            value: "true"
          - name: SENTRY_DSN
            value: https://51f9cd9bd2fdee16144db08fc423cd3b@o1120648.ingest.us.sentry.io/4508799804702720
          
          
          
        lifecycle:
          preStop:
            exec:
              command: ["bash", "-c", "kill -SIGINT 1"]
        volumeMounts:
          - name: playbooks-config-secret
            mountPath: /etc/robusta/config
          - name: custom-toolsets-configmap
            mountPath: /etc/holmes/config
        resources:
          requests:
            cpu: 100m
            memory: 2048Mi
          limits:
            memory: 2048Mi
            
      volumes:
        - name: playbooks-config-secret
          secret:
            secretName: robusta-playbooks-config-secret
            optional: true
        - name: custom-toolsets-configmap
          configMap:
            name: custom-toolsets-configmap
            optional: true
---
# Source: robusta/templates/forwarder.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: robusta-forwarder
  namespace: monitoring
  labels:
    robusta: forwarder
spec:
  selector:
    matchLabels:
      app: robusta-forwarder
  replicas: 1
  revisionHistoryLimit: 10
  template:
    metadata:
      annotations:
        checksum/config: e2dab153849ef0240d3c420a6e52cf30e0b7429e21b9085bb15c18309d0d887f
      labels:
        app: robusta-forwarder
    spec:
      serviceAccountName: robusta-forwarder-service-account
      automountServiceAccountToken: true
      containers:
      - name: kubewatch
        # this is a custom version of kubewatch built from https://github.com/aantn/kubewatch
        image: robustadev/kubewatch:v2.11.0
        imagePullPolicy: IfNotPresent
        env:
          - name: KW_CONFIG
            value: /config
          - name: ENABLE_PPROF
            value: "true"
        volumeMounts:
          - name: robusta-kubewatch-config
            mountPath: /config
        securityContext:
            allowPrivilegeEscalation: false
            capabilities: {}
            privileged: false
            readOnlyRootFilesystem: false
            runAsUser: 1000
        resources:
          requests:
            cpu: 10m
            memory: "512Mi"
          limits:
            memory: "512Mi"
            
      volumes:
        - name:  robusta-kubewatch-config
          configMap:
            name: robusta-kubewatch-config
---
# Source: robusta/templates/runner.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: robusta-runner
  namespace: monitoring
  labels:
    robusta: runner
    app: robusta-runner
spec:
  replicas: 1
  revisionHistoryLimit: 10
  selector:
    matchLabels:
      app: robusta-runner
  template:
    metadata:
      labels:
        app: robusta-runner
        robustaComponent: "runner"
    spec:
      serviceAccountName: robusta-runner-service-account
      automountServiceAccountToken: true
      containers:
      - name: runner
        image: robustadev/robusta-runner:0.28.1
        imagePullPolicy: IfNotPresent
        securityContext:
            allowPrivilegeEscalation: false
            capabilities: {}
            privileged: false
            readOnlyRootFilesystem: false
        env:
          - name: PLAYBOOKS_CONFIG_FILE_PATH
            value: /etc/robusta/config/active_playbooks.yaml
          - name: RELEASE_NAME
            value: "robusta"
          - name: PROMETHEUS_ENABLED
            value: "false"
          - name: MANAGED_CONFIGURATION_ENABLED
            value: "false"
          - name: SEND_ADDITIONAL_TELEMETRY
            value: "false"
          - name: LOG_LEVEL
            value: INFO
          - name: INSTALLATION_NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
          - name: HOLMES_ENABLED
            value: "True"
          - name: RUNNER_VERSION
            value: 0.28.1
          - name: CERTIFICATE
            value: 
          - name: IMAGE_REGISTRY
            value: robustadev
          - name: CLUSTER_DOMAIN
            value: cluster.local
          - name: SET_KRR_SECURITY_CONTEXT
            value: "false"
          
          - name: SLACK_WEBHOOK
            valueFrom:
              secretKeyRef:
                key: webhook_url
                name: robusta-slack-webhook
        envFrom:
        - secretRef:
            name: robusta-runner-secret
            optional: true
        volumeMounts:
          - name: auth-config-secret
            mountPath: /etc/robusta/auth
          - name: playbooks-config-secret
            mountPath: /etc/robusta/config
        lifecycle:
          preStop:
            exec:
              command: ["bash", "-c", "kill -SIGINT 1"]
        resources:
          requests:
            cpu: 100m
            memory: "256Mi"
          limits:
            memory: "512Mi"
            cpu: "500m"
      volumes:
        - name: playbooks-config-secret
          secret:
            secretName: robusta-playbooks-config-secret
            optional: true
        - name: auth-config-secret
          secret:
            secretName: robusta-auth-config-secret
            optional: true
