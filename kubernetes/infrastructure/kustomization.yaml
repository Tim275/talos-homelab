# ğŸ¯ 3-LEVEL CONTROL - MAXIMUM FLEXIBILITY!
# ==========================================
# Level 1: DOMAIN CONTROL (this file) - Nice-to-have for extreme scenarios
# Level 2: SERVICE CONTROL (ApplicationSet lists) - Main day-to-day control
# Level 3: COMPONENT CONTROL (service/kustomization.yaml) - Fine-grained control
#
# RESULT: Every service visible as individual Application in ArgoCD UI!

apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

labels:
  - pairs:
      app.kubernetes.io/managed-by: argocd
      enterprise.tier: infrastructure
      enterprise.pattern: triple-level-control-2025
      team: timour

# ğŸŒŠ Sync Wave 1: Infrastructure Foundation Layer
commonAnnotations:
  argocd.argoproj.io/sync-wave: "1"

resources:
  # ğŸ›ï¸ INFRASTRUCTURE PROJECT
  - project.yaml

  # ğŸ›ï¸ LEVEL 1: DOMAIN CONTROL - Comment/Uncomment for extreme scenarios
  # ====================================================================

  # ğŸ¯ ENTERPRISE GITILES PATTERN - Pure Kustomize Control
  # ======================================================
  # Comment/Uncomment individual services for TRUE control

  # ğŸ›ï¸ CONTROLLERS (Comment/Uncomment individual services)
  - controllers/argocd/
  - controllers/cert-manager/
  - controllers/sealed-secrets/
  # - controllers/cluster-autoscaler/    # âŒ DISABLED via comment

  # ğŸŒ NETWORK (Comment/Uncomment individual services)
  - network/cilium/
  - network/cloudflared/
  - network/gateway/
  # - network/istio/                     # âŒ DISABLED via comment

  # ğŸ’¾ STORAGE (Comment/Uncomment individual services)
  - storage/rook-ceph/
  # - storage/longhorn/                  # âŒ DISABLED via comment

  # ğŸ“Š MONITORING (Comment/Uncomment individual services)
  - monitoring/kube-prometheus-stack/
  - monitoring/grafana/
  - monitoring/jaeger/
  # - monitoring/opencost/               # âŒ DISABLED via comment (path renamed to .disabled)
  - monitoring/metrics-server/

  # ğŸ” OBSERVABILITY (Comment/Uncomment individual services)
  - observability/vector/
  - observability/elasticsearch/
  # - observability/fluent-bit/          # âŒ DISABLED via comment

  # ğŸ“Š DIRECT APPLICATIONS
  # - monitoring/kube-prometheus-stack/application.yaml  # âŒ DISABLED: Back to kustomize pattern

  # âŒ DISABLED DOMAINS - Uncomment when needed
  # - backup-app.yaml         # âŒ DISABLED - Backup domain not implemented yet

# ğŸ¯ 3-LEVEL CONTROL EXAMPLES:
#
# ğŸ”§ NORMAL DAY-TO-DAY USE (Level 2 - Service Control):
# - Want to disable prometheus? â†’ Comment it in monitoring-app.yaml
# - Want to disable vector? â†’ Comment it in observability-app.yaml
# - Want to disable jaeger? â†’ Comment it in monitoring-app.yaml
#
# ğŸ› ï¸ FINE-GRAINED CONTROL (Level 3 - Component Control):
# - Want to disable prometheus alerting? â†’ Comment alerting-rules.yaml in prometheus/kustomization.yaml
# - Want to disable grafana dashboards? â†’ Comment dashboards/ in grafana/kustomization.yaml
#
# ğŸš¨ EXTREME SCENARIOS (Level 1 - Domain Control):
# - Testing: Comment monitoring-app.yaml â†’ ALL monitoring services disabled
# - Migration: Comment storage-app.yaml â†’ ALL storage services disabled
# - Debugging: Comment observability-app.yaml â†’ ALL observability services disabled
