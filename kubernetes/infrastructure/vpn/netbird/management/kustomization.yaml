apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

configMapGenerator:
  - name: management-config
    namespace: netbird
    literals:
      - NETBIRD_STORE_ENGINE="sqlite"
      - NETBIRD_DATADIR="/var/lib/netbird"
      - NETBIRD_HTTP_API_AUTH_AUDIENCE="netbird"
      - NETBIRD_AUTH_OIDC_CONFIGURATION_ENDPOINT="https://authelia.timourhomelab.org/.well-known/openid-configuration"
      - NETBIRD_DOMAIN="netbird.timourhomelab.org:443"
      - NETBIRD_HTTP_API_ENDPOINT="https://netbird.timourhomelab.org"
      - NETBIRD_MGMT_API_ADDRESS=":80"
      - NETBIRD_SIGNAL_PROTOCOL="https"
      - NETBIRD_SIGNAL_URI="netbird.timourhomelab.org:443"
      - NETBIRD_TURN_DOMAIN="coturn.timourhomelab.org"
      - NETBIRD_TURN_PORT="3478"

resources:
  - deployment.yaml
  - service.yaml
