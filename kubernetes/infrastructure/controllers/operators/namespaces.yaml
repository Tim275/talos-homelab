# üè¢ OPERATOR NAMESPACES - Enterprise Pattern
# ============================================
# Namespaces MUST exist BEFORE Helm Charts deploy
# ArgoCD CreateNamespace=true does NOT work for Kustomize helmCharts!
#
# CRITICAL: Wave -5 ensures namespaces exist before Helm charts (Wave 0)
#
# Ref: https://www.redhat.com/en/blog/operator-installation-with-argo-cd/gitops
---
apiVersion: v1
kind: Namespace
metadata:
  name: cnpg-system
  labels:
    app.kubernetes.io/name: cloudnative-pg
    app.kubernetes.io/component: operator
    enterprise.tier: infrastructure
  annotations:
    argocd.argoproj.io/sync-wave: "-5"
---
apiVersion: v1
kind: Namespace
metadata:
  name: elastic-system
  labels:
    app.kubernetes.io/name: elastic
    app.kubernetes.io/component: operator
    enterprise.tier: infrastructure
    pod-security.kubernetes.io/enforce: privileged  # Required for Elasticsearch
  annotations:
    argocd.argoproj.io/sync-wave: "-5"
---
apiVersion: v1
kind: Namespace
metadata:
  name: grafana
  labels:
    app.kubernetes.io/name: grafana
    app.kubernetes.io/component: operator
    enterprise.tier: infrastructure
  annotations:
    argocd.argoproj.io/sync-wave: "-5"
---
apiVersion: v1
kind: Namespace
metadata:
  name: opentelemetry
  labels:
    app.kubernetes.io/name: opentelemetry
    app.kubernetes.io/component: operator
    enterprise.tier: infrastructure
  annotations:
    argocd.argoproj.io/sync-wave: "-5"
---
apiVersion: v1
kind: Namespace
metadata:
  name: kafka
  labels:
    app.kubernetes.io/name: strimzi-kafka
    app.kubernetes.io/component: operator
    enterprise.tier: infrastructure
  annotations:
    argocd.argoproj.io/sync-wave: "-5"
---
apiVersion: v1
kind: Namespace
metadata:
  name: redis-operator-system
  labels:
    app.kubernetes.io/name: redis-operator
    app.kubernetes.io/component: operator
    enterprise.tier: infrastructure
  annotations:
    argocd.argoproj.io/sync-wave: "-5"
---
apiVersion: v1
kind: Namespace
metadata:
  name: psmdb-operator
  labels:
    app.kubernetes.io/name: percona-server-mongodb
    app.kubernetes.io/component: operator
    enterprise.tier: infrastructure
  annotations:
    argocd.argoproj.io/sync-wave: "-5"
---
apiVersion: v1
kind: Namespace
metadata:
  name: rabbitmq-system
  labels:
    app.kubernetes.io/name: rabbitmq-cluster-operator
    app.kubernetes.io/component: operator
    enterprise.tier: infrastructure
  annotations:
    argocd.argoproj.io/sync-wave: "-5"
