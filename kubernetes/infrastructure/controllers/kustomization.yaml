apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# ðŸŽ¯ TRUE KUSTOMIZE CONTROL - COMMENT/UNCOMMENT = ENABLE/DISABLE!
# ===============================================================
# This is what you wanted for 35 hours! Pure kustomize control!

commonLabels:
  app.kubernetes.io/managed-by: argocd
  infrastructure.domain: controllers

# ðŸŒŠ Sync Wave 2: Controllers (After Network)
commonAnnotations:
  argocd.argoproj.io/sync-wave: "2"

resources:
  # ðŸŽ¯ CHILD APPLICATIONS - APPEAR IN ARGOCD UI
  # ===========================================
  # These application.yaml files create child apps in ArgoCD UI
  - argocd/application.yaml
  - sealed-secrets/application.yaml
  - cert-manager/application.yaml
  - argo-rollouts/application.yaml
  - cloudnative-pg/application.yaml

  # - cluster-autoscaler/  # Fixed cluster size
  # - external-secrets/    # Using sealed-secrets instead