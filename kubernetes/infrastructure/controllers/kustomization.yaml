apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# üéØ TRUE KUSTOMIZE CONTROL - COMMENT/UNCOMMENT = ENABLE/DISABLE!
# ===============================================================
# This is what you wanted for 35 hours! Pure kustomize control!

commonLabels:
  app.kubernetes.io/managed-by: argocd
  infrastructure.domain: controllers

# üåä Sync Wave 2: Controllers (After Network)
commonAnnotations:
  argocd.argoproj.io/sync-wave: "2"

resources:
  # üéØ CONTROLLER COMPONENTS - COMMENT/UNCOMMENT TO CONTROL!
  # =======================================================

  # ‚úÖ ENABLED CONTROLLER COMPONENTS
  - argocd/                # ‚úÖ GitOps controller (CRITICAL!)
  - sealed-secrets/         # Secret management
  - cert-manager/          # Certificate automation
  - argo-rollouts/         # Progressive delivery

  # ‚ùå DISABLED CONTROLLER COMPONENTS (comment out to disable)
  # - cloudnative-pg/      # ‚ùå DISABLED - PostgreSQL operator not needed yet
  # - cluster-autoscaler/  # ‚ùå DISABLED - Fixed cluster size
  # - external-secrets/    # ‚ùå DISABLED - Using sealed-secrets instead