# OBSERVABILITY DOMAIN - SERVICE CONTROL LAYER
# ================================================
# Level 3: Service Control - Comment/Uncomment individual observability services
# Parent: observability-app.yaml -> This kustomization -> Child applications

apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Sync Wave 5: Observability Stack
commonAnnotations:
  argocd.argoproj.io/sync-wave: "5"

resources:
  # OBSERVABILITY SERVICES - APP-OF-APPS PATTERN
  # ================================================

  # Core Logging Stack
  - elasticsearch/application.yaml    # Elasticsearch cluster (ECK)
  - kibana/application.yaml          # Kibana UI
  - vector/application.yaml          # Vector log collector (PRIMARY)

  # Additional Observability
  - opentelemetry/application.yaml   # ENABLED: OpenTelemetry collector for tracing

  # Mirror/Backup Log Collectors - Files remain for future use, NOT deployed to ArgoCD
  # - fluent-bit/application.yaml    # DISABLED: FluentBit (configured as Vector mirror, activate when needed)
  # - fluentd/application.yaml       # DISABLED: Fluentd (configured as Vector mirror, activate when needed)

labels:
  - pairs:
      app.kubernetes.io/part-of: observability-stack
      infrastructure.domain: observability
      team: timour
