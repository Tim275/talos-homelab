apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# ðŸŒŠ Sync Wave 5: Log Collection (Observability Stack)
commonAnnotations:
  argocd.argoproj.io/sync-wave: "5"

namespace: elastic-system

resources:
  - application.yaml           # âœ… Child Application for App-of-Apps pattern
  - rbac.yaml
  - vector-agent.yaml
  - vector-aggregator.yaml
  - talos-comprehensive-monitoring.yaml

configMapGenerator:
  - name: vector-agent-config
    files:
      - vector.toml=vector-agent.toml
  - name: vector-aggregator-config
    files:
      - vector.toml=vector-aggregator.toml

labels:
  - pairs:
      app.kubernetes.io/part-of: observability-stack
      app.kubernetes.io/component: log-collection