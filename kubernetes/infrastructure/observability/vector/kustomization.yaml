apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization


# üåä Sync Wave 5: Log Collection (Observability Stack)
commonAnnotations:
  argocd.argoproj.io/sync-wave: "5"

namespace: elastic-system

resources:
  - rbac.yaml
  - vector-agent.yaml
  - vector-aggregator.yaml
  - vector-servicemonitor.yaml
  - talos-comprehensive-monitoring.yaml
  - kibana-dataviews-bootstrap.yaml
  - elasticsearch-ilm-policies.yaml
  - logging-alerts.yaml
  - kube-audit-logs.yaml

configMapGenerator:
  - name: vector-agent-config
    files:
      - vector.toml=vector-agent.toml
  - name: vector-aggregator-config
    files:
      - vector.toml=vector-aggregator.toml  # ‚Üê ENTERPRISE SERVICE-BASED CONFIG!

labels:
  - pairs:
      app.kubernetes.io/part-of: observability-stack
      app.kubernetes.io/component: log-collection
