# Elasticsearch S3 Snapshots - Kustomization
# Part of Elasticsearch Cluster Application
apiVersion: kustomization.config.k8s.io/v1beta1
kind: Kustomization

resources:
  # 1. S3 Bucket (Ceph RGW)
  - bucket.yaml

  # 2. Extract S3 credentials and create ECK SecureSettings Secret
  - create-s3-credentials-job.yaml

  # 3. Register S3 snapshot repository
  - register-repository-job.yaml

  # 4. Configure automated daily snapshots (SLM)
  - slm-policy-job.yaml

# Labels for all resources
commonLabels:
  app.kubernetes.io/part-of: elasticsearch-cluster
  app.kubernetes.io/component: backup
