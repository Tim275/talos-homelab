# Clean Dashboard IDs with color mode fixes for Grafana compatibility
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboards
  namespace: monitoring
  labels:
    grafana_dashboard: "1"
    grafana_folder: "Infrastructure"
data:
  # Node Exporter Full - ID: 1860 
  node-exporter.json: |
    {
      "__inputs": [
        {"name": "DS_PROMETHEUS", "label": "Prometheus", "type": "datasource", "pluginId": "prometheus"}
      ],
      "__requires": [
        {"type": "grafana", "id": "grafana", "name": "Grafana", "version": "8.0.0"}
      ],
      "gnetId": 1860,
      "title": "Node Exporter Full",
      "tags": ["prometheus", "node-exporter"],
      "refresh": "30s",
      "style": "dark",
      "timezone": "browser"
    }
  # Kubernetes Cluster Monitoring - ID: 7249  
  kubernetes-cluster.json: |
    {
      "__inputs": [
        {"name": "DS_PROMETHEUS", "label": "Prometheus", "type": "datasource", "pluginId": "prometheus"}
      ],
      "gnetId": 7249,
      "title": "Kubernetes Cluster Monitoring (Prometheus)",
      "tags": ["kubernetes", "prometheus"],
      "refresh": "30s",
      "style": "dark"
    }
  # Ceph Cluster - ID: 2842
  ceph-cluster.json: |
    {
      "__inputs": [
        {"name": "DS_PROMETHEUS", "label": "Prometheus", "type": "datasource", "pluginId": "prometheus"}
      ],
      "gnetId": 2842,
      "title": "Ceph Cluster",
      "tags": ["ceph", "storage"],
      "refresh": "30s",
      "style": "dark"
    }
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-provider
  namespace: monitoring
data:
  dashboards.yaml: |
    apiVersion: 1
    providers:
      - name: 'default'
        orgId: 1
        folder: 'Infrastructure'
        type: file
        disableDeletion: false
        updateIntervalSeconds: 30
        allowUiUpdates: true
        options:
          path: /var/lib/grafana/dashboards/default
        folderUid: ''
        foldersFromFilesStructure: true