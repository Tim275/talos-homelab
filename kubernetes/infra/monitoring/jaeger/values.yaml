# Jaeger Configuration for Homelab with Badger Storage on Ceph
# Using Badger (embedded database) with persistent volume on Ceph

# Disable ALL external data stores
provisionDataStore:
  cassandra: false
  elasticsearch: false
  kafka: false

cassandra:
  enabled: false

elasticsearch:
  enabled: false

kafka:
  enabled: false

# Storage configuration
storage:
  type: badger
  badger:
    ephemeral: false
    
# Enable all-in-one deployment with Badger storage
allInOne:
  enabled: true
  replicas: 1
  args:
    - "--query.base-path=/"
    - "--badger.ephemeral=false"
    - "--badger.directory-value=/badger/data"
    - "--badger.directory-key=/badger/key"
  env:
    - name: SPAN_STORAGE_TYPE
      value: badger
  extraEnv:
    - name: BADGER_EPHEMERAL
      value: "false"
    - name: BADGER_DIRECTORY_VALUE
      value: "/badger/data"
    - name: BADGER_DIRECTORY_KEY  
      value: "/badger/key"
  volumeMounts:
    - name: badger-storage
      mountPath: /badger
  volumes:
    - name: badger-storage
      persistentVolumeClaim:
        claimName: jaeger-badger-storage
  resources:
    requests:
      memory: 256Mi
      cpu: 100m
    limits:
      memory: 1Gi
      cpu: 500m

# Disable ALL individual components  
query:
  enabled: false
collector:
  enabled: false
agent:
  enabled: false
ingester:
  enabled: false

# Disable service monitor for now
serviceMonitor:
  enabled: false