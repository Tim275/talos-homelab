# Jaeger Configuration for Homelab - Simplified
# Using memory storage to avoid S3 plugin issues

# Disable built-in data stores
provisionDataStore:
  cassandra: false
  elasticsearch: false
  kafka: false

# Enable all-in-one deployment for homelab simplicity
allInOne:
  enabled: true
  replicas: 1
  args:
    - "--query.base-path=/"
  resources:
    requests:
      memory: 256Mi
      cpu: 100m
    limits:
      memory: 1Gi
      cpu: 500m
  service:
    type: ClusterIP
    # Expose standard Jaeger ports
    ports:
      - name: http-query
        port: 16686
        protocol: TCP
        targetPort: 16686
      - name: otlp-grpc
        port: 4317
        protocol: TCP
        targetPort: 4317
      - name: otlp-http
        port: 4318
        protocol: TCP
        targetPort: 4318

# Disable individual components (using all-in-one instead)
query:
  enabled: false
collector:
  enabled: false
agent:
  enabled: false
ingester:
  enabled: false

# Enable ServiceMonitor for Prometheus scraping
serviceMonitor:
  enabled: true
  labels:
    release: prometheus-operator