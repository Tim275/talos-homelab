# Jaeger Configuration for Homelab with Badger Storage on Ceph
# Using Badger (embedded database) with persistent volume on Ceph

# Disable external data stores
provisionDataStore:
  cassandra: false
  elasticsearch: false
  kafka: false

# Enable all-in-one deployment with Badger storage
allInOne:
  enabled: true
  replicas: 1
  args:
    - "--query.base-path=/"
  extraEnv:
    - name: SPAN_STORAGE_TYPE
      value: "badger"
    - name: BADGER_EPHEMERAL
      value: "false"
    - name: BADGER_DIRECTORY_VALUE
      value: "/badger/data"
    - name: BADGER_DIRECTORY_KEY
      value: "/badger/key"
  volumeMounts:
    - name: badger-storage
      mountPath: /badger
  volumes:
    - name: badger-storage
      persistentVolumeClaim:
        claimName: jaeger-badger-storage
  resources:
    requests:
      memory: 256Mi
      cpu: 100m
    limits:
      memory: 1Gi
      cpu: 500m

# Disable individual components (using all-in-one)
query:
  enabled: false
collector:
  enabled: false
agent:
  enabled: false
ingester:
  enabled: false

# Enable ServiceMonitor for Prometheus scraping
serviceMonitor:
  enabled: true
  labels:
    release: prometheus-operator