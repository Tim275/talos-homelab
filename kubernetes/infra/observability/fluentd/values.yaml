# Simple Fluentd Configuration - Use Official Defaults
# Just override what we need for our Elasticsearch cluster

# Deploy as single replica for homelab
replicaCount: 1

# Use official Fluentd image
image:
  repository: "fluent/fluentd-kubernetes-daemonset"
  tag: "v1.16.2-debian-elasticsearch7-1.2"

# Environment variables for Elasticsearch
env:
  - name: "FLUENT_ELASTICSEARCH_HOST"
    value: "production-cluster-es-http.elastic-system"
  - name: "FLUENT_ELASTICSEARCH_PORT"
    value: "9200"
  - name: "FLUENT_ELASTICSEARCH_SCHEME"
    value: "https"
  - name: "FLUENT_ELASTICSEARCH_SSL_VERIFY"
    value: "false"
  - name: "FLUENT_ELASTICSEARCH_USER"
    value: "elastic"
  - name: "FLUENT_ELASTICSEARCH_PASSWORD"
    value: "04h26K03zEMhI7I9DRbk5AT5"

# Service for FluentBit forwarding
service:
  type: "ClusterIP"
  ports:
    - name: "forwarder"
      protocol: TCP
      containerPort: 24224
      servicePort: 24224

# Resource limits
resources:
  limits:
    memory: "1Gi"
    cpu: "500m"
  requests:
    memory: "512Mi" 
    cpu: "200m"

# RBAC
rbac:
  create: true

serviceAccount:
  create: true

# Use official defaults for everything else
defaultConfigs:
  enabled: true

# No custom file configs - let the chart handle it