apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# ðŸŒŠ Sync Wave 20: Core Applications (Production AudioBookshelf)
commonAnnotations:
  argocd.argoproj.io/sync-wave: "20"

namespace: audiobookshelf-prod

resources:
- ../../../base/audiobookshelf

patches:
- path: resources-patch.yaml
  target:
    kind: Deployment
    name: audiobookshelf
- path: backup-patch.yaml
  target:
    kind: Deployment
    name: audiobookshelf

labels:
  - pairs:
      environment: production
    includeSelectors: false  # Don't modify immutable selectors

images:
- name: ghcr.io/advplyr/audiobookshelf
  newTag: "2.27.0"  # Production uses pinned stable version