# üéØ ENTERPRISE BOOTSTRAP PATTERN - 2-STEP CONTROL
# ===============================================
# STEP 1: BOOTSTRAP - kubectl apply -k apps/
#         Deploys ONLY Projects + ApplicationSets (no individual services)
#         Fast bootstrap without waiting for Helm charts
#
# STEP 2: GRANULAR CONTROL - Comment/Uncomment in ApplicationSet files
#         Edit dev-app.yaml, prod-app.yaml application ApplicationSets
#         Individual services ein/ausschalten nach Bootstrap
#
# RESULT: Every app environment visible as individual Application in ArgoCD UI!

apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

labels:
  - pairs:
      app.kubernetes.io/managed-by: argocd
      enterprise.tier: apps
      enterprise.pattern: triple-level-control-2025
      team: timour

# üåä Sync Wave 25: Applications Layer (After Platform)
commonAnnotations:
  argocd.argoproj.io/sync-wave: "25"

resources:
  # üöÄ APPS PROJECT
  - project.yaml

  # üéõÔ∏è LEVEL 1: ENVIRONMENT CONTROL - Comment/Uncomment for extreme scenarios
  # ========================================================================

  # ‚úÖ ENABLED ENVIRONMENTS (nice-to-have control for testing/migration/debugging)
  - dev-app.yaml             # ‚Üí apps-dev-audiobookshelf, apps-dev-n8n, apps-dev-kafka-demo
  - prod-app.yaml            # ‚Üí apps-prod-audiobookshelf, apps-prod-n8n, apps-prod-kafka-demo
  # - staging-app.yaml       # ‚Üí apps-staging-audiobookshelf, apps-staging-n8n, apps-staging-kafka-demo

  # üè¢ TENANT APPLICATIONS
  # - oms.yaml                 # ‚Üí OMS tenant application (production) - DISABLED: waiting for AMD64 images

  # ‚ùå DISABLED ENVIRONMENTS - Uncomment when needed
  # - canary-app.yaml        # ‚ùå DISABLED - Canary environment not implemented yet
  # - preview-app.yaml       # ‚ùå DISABLED - Preview environment not needed yet
