apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# üöÄ 2025 ENTERPRISE HYBRID - Apps ApplicationSets + Kustomize Control
# ====================================================================
# LEVEL 1: Bootstrap deploys this (App-of-Apps pattern)
# LEVEL 2: This deploys ApplicationSets (for component visibility)
# LEVEL 3: Overlay kustomization.yaml files (TRUE kustomize control)
#
# This follows 2025 enterprise best practices:
# - Netflix: Multi-layered GitOps with component discovery
# - Google: Platform engineering with self-service visibility
# - Spotify: Golden Path with team autonomy
# - Meta: Hybrid patterns for scale + control
# SPECIAL: Apps layer uses environment-based ApplicationSets

commonLabels:
  app.kubernetes.io/managed-by: argocd
  enterprise.tier: apps
  enterprise.pattern: hybrid-2025
  team: timour

# üåä Sync Wave 25: Applications Layer (After Platform)
commonAnnotations:
  argocd.argoproj.io/sync-wave: "25"

resources:
  # üéØ APPS LAYER CONTROL - COMMENT/UNCOMMENT = ENABLE/DISABLE!
  # ==========================================================

  # ‚úÖ ENABLED APPS MANAGEMENT
  - project.yaml           # Apps project with orphaned resources policy
  - applications.yaml      # ApplicationSets for component visibility & debugging

  # üéØ ENVIRONMENT OVERLAY FILES PROVIDE TRUE CONTROL:
  # overlays/dev/kustomization.yaml - Development environment apps
  # overlays/staging/kustomization.yaml - Staging environment apps
  # overlays/prod/kustomization.yaml - Production environment apps
  #
  # üí° ApplicationSets discover components, overlay kustomization.yaml controls deployment!

  # ‚ùå DISABLED APPS MANAGEMENT (comment out to disable)
  # - legacy-base-deployment/    # ‚ùå DISABLED - Using environment-based pattern now