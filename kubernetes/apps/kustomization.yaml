apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization



# namespace: argocd  # Removed - causes namespace conflicts when used by ArgoCD

# 🏢 Enterprise Application Labels
labels:
- includeSelectors: true
  pairs:
    app.kubernetes.io/managed-by: argocd
    app.kubernetes.io/part-of: timour-homelab
    app.kubernetes.io/layer: applications
    enterprise.pattern: applicationset
    team: timour

# 📊 Enterprise Annotations
commonAnnotations:
  argocd.argoproj.io/sync-wave: "20"
  enterprise.architecture: "true"
  gitops.pattern: "applicationset-layers"
  applications.scalability: "100+"

resources:
  # 🎯 APPS DOMAIN APPLICATIONSETS - ENTERPRISE TIER-2 PATTERN!
  # ============================================================
  # Each domain gets its own ApplicationSet for clean UI hierarchy
  - base-applicationset.yaml         # 📱 Application Templates and Base Configurations
  - environments-applicationset.yaml # 🌍 Environment-specific Application Deployments

  # 🎯 OLD MEGA APPLICATIONSET (DISABLED - caused UI chaos)
  # - applications.yaml

  # 🎛️ DOMAIN APPLICATIONSETS NOW HANDLE COMPONENT CONTROL!
  # ========================================================
  # The individual domain ApplicationSets now discover and deploy components:
  # - base-applicationset.yaml manages base/*
  # - environments-applicationset.yaml manages overlays/*
  #
  # 💡 ENABLE/DISABLE CONTROL moved to individual component kustomization.yaml files!