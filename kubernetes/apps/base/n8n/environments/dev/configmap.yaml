apiVersion: v1
kind: ConfigMap
metadata:
  name: n8n-configmap
  namespace: n8n-dev
data:
  N8N_PORT: "3008"
  N8N_PROTOCOL: "http"
  N8N_SECURE_COOKIE: "false"

  # Security: Enforce file permissions (Enterprise requirement)
  N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS: "true"
  
  # Database Configuration - PostgreSQL
  DB_TYPE: "postgresdb"
  DB_POSTGRESDB_HOST: "n8n-postgres-rw.n8n-dev.svc.cluster.local"
  DB_POSTGRESDB_PORT: "5432"
  DB_POSTGRESDB_DATABASE: "n8n"
  DB_POSTGRESDB_USER: "n8n"
  
  # Alternative: SQLite (built-in, no external database needed)
  # DB_TYPE: "sqlite"
  # DB_SQLITE_DATABASE: "/home/node/.n8n/database.sqlite"