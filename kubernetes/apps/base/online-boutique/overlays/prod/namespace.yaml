apiVersion: v1
kind: Namespace
metadata:
  name: boutique-prod
  labels:
    # Enable Istio Sidecar injection
    istio.io/rev: default-v1-26-4
    # PodSecurity: privileged required for Istio sidecar (istio-init needs NET_ADMIN)
    pod-security.kubernetes.io/enforce: privileged
    pod-security.kubernetes.io/audit: privileged
    pod-security.kubernetes.io/warn: privileged
    environment: prod
    app: online-boutique
    layer: apps  # Triggers Kyverno auto-inject Istio policy
