apiVersion: argoproj.io/v1alpha1
kind: ApplicationSet
metadata:
  name: platform-enterprise
  namespace: argocd
  labels:
    platform.layer: enterprise
    enterprise.tier: platform
    team: timour
  annotations:
    argocd.argoproj.io/sync-wave: "18"
spec:
  goTemplate: true
  generators:
    # üè¢ ENTERPRISE PATTERN: Enterprise Platform Extensions
    - list:
        elements:
          # Identity & Access Management
          - name: identity
            path: kubernetes/platform/enterprise/identity
            namespace: identity
            critical: "true"
            component: "iam"
            wave: "18"
            enabled: "false"  # To be implemented
          # Business Process Management
          - name: workflow
            path: kubernetes/platform/enterprise/workflow
            namespace: workflow
            critical: "false"
            component: "bpm"
            wave: "19"
            enabled: "false"  # To be implemented
          # SAP Integration Platform
          - name: sap-connector
            path: kubernetes/platform/enterprise/sap-connector
            namespace: sap
            critical: "false"
            component: "erp-integration"
            wave: "19"
            enabled: "false"  # Enterprise integration
          # Salesforce Integration
          - name: salesforce
            path: kubernetes/platform/enterprise/salesforce
            namespace: crm
            critical: "false"
            component: "crm-integration"
            wave: "19"
            enabled: "false"  # CRM integration
          # AI/ML Platform Services
          - name: ai-platform
            path: kubernetes/platform/enterprise/ai-platform
            namespace: ai
            critical: "false"
            component: "ml-platform"
            wave: "20"
            enabled: "false"  # Future AI capabilities
          # Data Lake Platform
          - name: data-lake
            path: kubernetes/platform/enterprise/data-lake
            namespace: data-lake
            critical: "false"
            component: "big-data"
            wave: "19"
            enabled: "false"  # Analytics platform
          # Compliance & Governance
          - name: compliance
            path: kubernetes/platform/enterprise/compliance
            namespace: compliance
            critical: "true"
            component: "governance"
            wave: "18"
            enabled: "false"  # Regulatory compliance
          # Enterprise Service Bus
          - name: esb
            path: kubernetes/platform/enterprise/esb
            namespace: integration
            critical: "false"
            component: "service-bus"
            wave: "19"
            enabled: "false"  # Legacy integration
  template:
    metadata:
      name: 'platform-enterprise-{{.name}}'
      labels:
        platform.layer: enterprise
        platform.component: '{{.component}}'
        platform.critical: '{{.critical}}'
        app.kubernetes.io/managed-by: argocd
        team: timour
      annotations:
        argocd.argoproj.io/sync-wave: '{{.wave}}'
    spec:
      project: app-of-apps
      source:
        repoURL: https://github.com/Tim275/talos-homelab
        targetRevision: HEAD
        path: '{{.path}}'
      destination:
        server: https://kubernetes.default.svc
        namespace: '{{.namespace}}'
      syncPolicy:
        automated:
          prune: true
          selfHeal: true
        syncOptions:
          - CreateNamespace=true
          - ServerSideApply=true