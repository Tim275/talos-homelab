apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  # âš ï¸ ALL POLICIES DISABLED - Kyverno blocked Cloudflare Tunnel deployment
  # TODO: Re-enable with proper exemptions for infrastructure namespaces

  # ðŸ” Security Policies (DISABLED)
  # - disallow-latest-tag.yaml
  # - require-run-as-non-root.yaml

  # ðŸ—ï¸ Best Practices (DISABLED)
  # - require-resource-limits.yaml
  # - require-resource-requests.yaml
  # - require-labels.yaml
  # - restrict-image-registries.yaml
  # - disallow-default-namespace.yaml

  # â¸ï¸ Best Practices (COMMENTED OUT - Enable when ready)
  # - require-probes.yaml              # Requires liveness + readiness probes
  # - require-pod-disruption-budget.yaml  # Requires PDB for replicas > 1

  # ðŸ”§ Mutations (DISABLED)
  # - auto-inject-istio-sidecar.yaml    # Istio sidecar for apps/ layer

  # ðŸ§¹ Cleanup Policies (DISABLED)
  # - disallow-finalizers.yaml
