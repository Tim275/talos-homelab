apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  # 🔐 Security Policies (MUST-HAVE)
  - disallow-latest-tag.yaml
  - require-run-as-non-root.yaml

  # 🏗️ Best Practices (SHOULD-HAVE)
  - require-resource-limits.yaml
  - require-resource-requests.yaml
  - require-labels.yaml
  - restrict-image-registries.yaml
  - disallow-default-namespace.yaml

  # ⏸️ Best Practices (COMMENTED OUT - Enable when ready)
  # - require-probes.yaml              # Requires liveness + readiness probes
  # - require-pod-disruption-budget.yaml  # Requires PDB for replicas > 1

  # 🔧 Mutations (AUTO-FIX)
  - auto-inject-istio-sidecar.yaml    # Istio sidecar for apps/ layer

  # 🧹 Cleanup Policies
  - disallow-finalizers.yaml
