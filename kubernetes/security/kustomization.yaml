apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# üöÄ 2025 ENTERPRISE HYBRID - Security ApplicationSets + Kustomize Control
# ========================================================================
# LEVEL 1: Bootstrap deploys this (App-of-Apps pattern)
# LEVEL 2: This deploys ApplicationSets (for component visibility)
# LEVEL 3: Domain kustomization.yaml files (TRUE kustomize control)
#
# This follows 2025 enterprise best practices:
# - Netflix: Multi-layered GitOps with component discovery
# - Google: Platform engineering with self-service visibility
# - Spotify: Golden Path with team autonomy
# - Meta: Hybrid patterns for scale + control
# Zero Trust Foundation f√ºr Enterprise Kubernetes

commonLabels:
  app.kubernetes.io/managed-by: argocd
  enterprise.tier: security
  enterprise.pattern: hybrid-2025
  team: timour

# üåä Sync Wave 0: Security Foundation (Before Everything)
commonAnnotations:
  argocd.argoproj.io/sync-wave: "0"

resources:
  # üéØ SECURITY LAYER CONTROL - COMMENT/UNCOMMENT = ENABLE/DISABLE!
  # ==============================================================

  # ‚úÖ ENABLED SECURITY MANAGEMENT
  - project.yaml           # ArgoCD project for security
  - applications.yaml      # ApplicationSets for component visibility & debugging

  # üéØ DOMAIN KUSTOMIZATION FILES PROVIDE TRUE CONTROL:
  # foundation/kustomization.yaml - RBAC, Pod Security, Network Policies
  # governance/kustomization.yaml - Policy Engines, Compliance, Audit
  #
  # üí° ApplicationSets discover components, kustomization.yaml controls deployment!

  # ‚ùå DISABLED SECURITY MANAGEMENT (comment out to disable)
  # - legacy-direct-deployment/  # ‚ùå DISABLED - Using hybrid pattern now