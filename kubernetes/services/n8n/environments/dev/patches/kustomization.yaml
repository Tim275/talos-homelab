apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# ðŸŒŠ Sync Wave 21: Development Applications (Dev n8n)
commonAnnotations:
  argocd.argoproj.io/sync-wave: "21"

namespace: n8n-dev

resources:
- ../../../base/n8n
- postgres-cluster-dev.yaml

patches:
- path: resources-patch.yaml
  target:
    kind: Deployment
    name: n8n
- path: configmap-patch.yaml
  target:
    kind: ConfigMap
    name: n8n-configmap
- path: secret-patch.yaml
  target:
    kind: Secret
    name: n8n-secrets

commonLabels:
  environment: dev

images:
- name: docker.n8n.io/n8nio/n8n
  newTag: latest  # Dev uses latest for testing