apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# ðŸŒŠ Development Environment
commonAnnotations:
  argocd.argoproj.io/sync-wave: "21"

namespace: n8n-dev

resources:
- ../base
- patches/postgres-cluster-dev.yaml

patches:
- path: patches/resources-patch.yaml
  target:
    kind: Deployment
    name: n8n
- path: patches/configmap-patch.yaml
  target:
    kind: ConfigMap
    name: n8n-configmap
- path: patches/secret-patch.yaml
  target:
    kind: Secret
    name: n8n-secrets
- path: patches/sqlite-patch.yaml
  target:
    kind: Deployment
    name: n8n

commonLabels:
  environment: dev
  service: n8n

images:
- name: docker.n8n.io/n8nio/n8n
  newTag: latest  # Dev uses latest for testing